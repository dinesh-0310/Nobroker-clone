var domains=["gmail.com","aol.com","yahoo.com","yahoo.co.in","yahoo.in","rediffmail.com","hotmail.com","ymail.com"],secondLevelDomains=["hotmail","gmail","aol","yahoo","rediffmail","ymail"],topLevelDomains=["com","net","co.in","edu","gov"],isMailSuggestion=!1,whatsappOpt=!0,whatsappOptChange=!1,whatsappOptCH,phone_number="",continueWithSuggestedEmail=!1,pageNameForAdobe=null,service=null;$(document).ready(function(){pageNameForAdobe=$("#pageNameForAdobe").val()?$("#pageNameForAdobe").val():"notfound",service=$("#pageNameForAdobe").data("type")?$("#pageNameForAdobe").data("type"):$("#nbpt").val()?$("#nbpt").val():"tenant",$(document).on("change","#manualSignUpForm input[type=email]",function(){isMailSuggestion=!1}),$(document).on("click",".suggestionTextMsg span",function(){nbGA.logEvent("ContactOwner","EmailSuggestionSelect-"+userRegistrationModalHelper.getCookie("flow"),{}),$("#manualSignUpForm input[type=email]").addClass("blur").val($(this).text()),setTimeout(function(){$("#manualSignUpForm input[type=email]").removeClass("blur")},300),$(".suggestionText").hide(),$(".suggestionTextMsg").text(""),isMailSuggestion=!1,continueWithSuggestedEmail=!0}),$(document).on("hide.bs.modal","#contactDetailsSentModal, #newPaymentModal",function(){"false"==$("#isULIN").val()&&(showLoading(),window.location.reload())}),$(document).on("click",".toggle-password",function(a){"password"==$("#userPassword").attr("type")?($("#userPassword").attr("type","text"),nbGA.logEvent("ContactOwner","ShowPassword_SignIn-"+userRegistrationModalHelper.getCookie("flow"),{})):$("#userPassword").attr("type","password")}),$(document).on("click","#modalCloseButton",function(){var a=userRegistrationModalHelper.getCookie("flow"),b={pageName:digitalData.pageInfo.pageName,platform:"nb-web",siteSection:pageNameForAdobe+"_"+("default"===a?"sidenav":a),flowName:"registration_journey",service:nbAdobeService.getServiceName(service)},c={eventName:"call-to-action click",eventType:"button click",ctaName:"ClosePopup"};nbAdobeEvents&&nbAdobeEvents.registerEvent(b,"cta_Click",{},c),$("#phoneVerification").is(":visible")?nbGA.logEvent("ContactOwner","UserDetailPopup-back-"+a,{}):$("#loginContent").is(":visible")?nbGA.logEvent("ContactOwner","SignIn_Close-"+a,{}):$("#signupContent").is(":visible")&&nbGA.logEvent("ContactOwner","SignUp_Close-"+a,{})}),$(document).on("keypress, keyup","#userPassword",function(a){$("#userPassword").val().length>0?$(".toggle-password").removeClass("hide"):$(".toggle-password").addClass("hide")}),$(document).on("change",".switch input",function(a){if(!(whatsappOpt=$(a.target).is(":checked"))){var b=userRegistrationModalHelper.getCookie("flow");$("#loginContent").is(":visible")?nbGA.logEvent("ContactOwner","WhatsAppOptOut_SignIn-"+b,{}):$("#signupContent").is(":visible")&&nbGA.logEvent("ContactOwner","WhatsAppOptOut_SignUp-"+b,{})}whatsappOptChange=!0}),$(document).on("keypress","form",function(a){if(13===a.which){switch(a.currentTarget.id){case"checkMobileNumber":checkPhoneNumber();break;case"manualSignUpForm":newUserSignup();break;case"checkLoginCredential":verifyLogin();break;case"checkEmailOtp":verifyEmailOtpLogin()}return a.preventDefault(),!1}});var a=void 0;$(document).on("countrychange","#contactNumber",function(a){"91"!==$(this).intlTelInput("getSelectedCountryData").dialCode?$(this).removeAttr("maxlength max"):$(this).attr({maxlength:10,max:10})}),$(document).on("keypress, keyup","#contactNumber",function(b){if(a!=$("#contactNumberInputWrapper #contactNumber").val()){if(a=$("#contactNumberInputWrapper  #contactNumber").val(),"91"==$(this).intlTelInput("getSelectedCountryData").dialCode&&$(this).val().length>=10){if($(this).val().length>10)return b.preventDefault(),nbUtils.showBootstrapFormFieldError("contactNumberInputWrapper","Enter a valid phone number.","focus"),!1;checkPhoneNumber()}$(this).val()>0?($("#whatsAppOptLoginSignup").animate({height:"42px"}),$("#whatsAppOptLoginSignup").css("border-style","none solid solid"),$("#WhatsAppOptlogin").attr("checked",whatsappOpt)):($("#whatsAppOptLoginSignup").animate({height:"0"}),$("#whatsAppOptLoginSignup").css("border-style","none"))}else b.stopPropagation()})}),$(window).load(function(){checkConflictCookie()});var updateEmailAddress=function(a){$("#newUserEmailInputWrapper #newUserEmail").val(a),$("#newUserEmailInputWrapper #suggestionMsg").addClass("hide"),isMailSuggestion=!1},checkPhoneNumber=function(){phone_number=$("#checkMobileNumber #contactNumber").val(),$(".newUserSignUpFields input[name=phone], input[name=X-SOCIAL-USER-PHONE]").val(phone_number),$("input[name=oldPhone]").val(phone_number);var a=$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData");$(".numberInUse").text("+"+a.dialCode+phone_number);var b=userRegistrationModalHelper.getCookie("flow");userRegistrationModalHelper.isvalidNumber(phone_number,a)?userRegistrationModalHelper.checkIfNumberExists(phone_number,a,b,checkNumberExistanceCallback,whatsappOpt):($("#contactNumberInputWrapperFieldError").remove(),nbUtils.showBootstrapFormFieldError("contactNumberInputWrapper","Enter a valid phone number.","focus"))},checkNumberExistanceCallback=function(a){if(200==a.status){var b="+"+$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData").dialCode+"-"+$("#checkMobileNumber #contactNumber").val();$("#userNumber").text(b);var c=userRegistrationModalHelper.getCookie("flow");10003===a.statusCode?(nbGA.logEvent("ContactOwner","SignIn_Initiated-"+c,{}),nbAdobeEvents&&nbAdobeEvents.registerEvent({pageName:"otppage",platform:"nb-web",siteSection:pageNameForAdobe+"_"+("default"===c?"topheader":c),flowName:"registration_journey",service:nbAdobeService.getServiceName(service)},"OTP_Popup",{phone:b,userType:"existing",isLoggedIn:"not-loggedin"}),$(".title-wrpper .phone-verification-title").hide(),$(".title-wrpper #title-signin").show(),$(".whatsapp-wrapper .whatsapp-unit").hide(),$(".whatsapp-wrapper .whatsApp-loginsignup").show(),$("#buttonWrapper button").hide(),$("#verifyLogin").show(),$("#loginSignupContent").show(),setTimeout(function(){$("#loginContent").slideDown(400,function(){$("#loginContent #userOtp").focus()})},100),userRegistrationModalHelper.otp_sent=!1,selectLoginOption()):10002===a.statusCode?($(".title-wrpper .phone-verification-title").hide(),$(".title-wrpper #title-signup").show(),$("#buttonWrapper button").hide(),$("#newUserSignup").show(),$(".whatsapp-opt-wrapper-login").show(),$(".whatsapp-wrapper .whatsapp-unit").hide(),$(".whatsapp-wrapper .whatsApp-loginsignup").show(),nbAdobeEvents&&nbAdobeEvents.registerEvent({pageName:"emailpage",platform:"nb-web",siteSection:pageNameForAdobe+"_"+("default"===c?"topheader":c),flowName:"registration_journey",service:nbAdobeService.getServiceName(service)},"Email_Popup",{phone:b,userType:"new",isLoggedIn:"not-loggedin"}),nbGA.logEvent("ContactOwner","newPhone-"+c,{}),$("#loginSignupContent").show(),setTimeout(function(){$("#signupContent").slideDown()},100),setTimeout(function(){$("#manualSignUpForm #newUserName").focus()},500),$("#newUserNameInputWrapper").removeClass("has-error"),$("#newUserEmailInputWrapper").removeClass("has-error"),$("#newUserNameInputWrapperFieldError").remove(),$("#newUserEmailInputWrapperFieldError").remove(),$("#newSignUperrorMsgText").addClass("hide"),$("#newSignUperrorMsgText").text("")):10001==a.statusCode&&nbUtils.showBootstrapFormFieldError("contactNumberInputWrapper",a.message,"focus")}else nbUtils.showBootstrapFormFieldError("contactNumberInputWrapper","Something went wrong. Please try again later.","focus");$(".switch input").prop("checked",whatsappOpt)},editNumber=function(){$("#signupContent #newUserEmail").val(""),$("#contactNumberInputWrapperFieldError").remove();var a=userRegistrationModalHelper.getCookie("flow"),b="+"+$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData").dialCode+"-"+$("#checkMobileNumber #contactNumber").val(),c={pageName:digitalData.pageInfo.pageName,platform:"nb-web",siteSection:pageNameForAdobe+"_"+("default"===a?"topheader":a),flowName:"registration_journey",service:nbAdobeService.getServiceName(service)},d={isLoggedIn:"not-loggedin",phone:b},e={eventName:"call-to-action click",eventType:"button click",ctaName:"Change Phone"};nbAdobeEvents&&nbAdobeEvents.registerEvent(c,"cta_Click",d,e),$("#loginContent").is(":visible")?nbGA.logEvent("ContactOwner","SignIn_Initiated-back-"+a,{}):nbGA.logEvent("ContactOwner","newPhone-back-"+a,{}),$("#newUserEmailInputWrapper #suggestionMsg").remove(),$(".title-wrpper .phone-verification-title").hide(),$(".title-wrpper #title-register").show(),$("#buttonWrapper button").hide(),$("#checkPhoneNumber").show(),$("#loginSignupContent").slideUp(400,function(){$(".whatsapp-wrapper .whatsapp-unit").hide(),$(".whatsapp-wrapper .whatsapp-register").show()}),$("#loginViaEmailContent").slideUp(),$("#loginContent").slideUp(),$("#signupContent").slideUp(),$("#contactNumber").focus(),$(".switch input").prop("checked",whatsappOpt)},selectLoginOption=function(){var a=userRegistrationModalHelper.getCookie("flow");"otp"===$("input[name=loginOption]:checked").val()?($("#otpInputWrapper").removeClass("hide has-error"),$("#passwordInputWrapper").addClass("hide"),$("#otpInputWrapperFieldError").remove(),$("#userOtp").val(""),$("#userOtp").focus(),sendVerificationOtp(),nbGA.logEvent("ContactOwner","ToggleOTP_SignIn-"+a,{})):(nbGA.logEvent("ContactOwner","TogglePassword_SignIn-"+a,{}),$("#otpInputWrapper").addClass("hide"),$("#passwordInputWrapper").removeClass("hide has-error"),$("#passwordInputWrapperFieldError").remove(),$("#userPassword").val(""),$("#userPassword").focus())},verifyLogin=function(){var a=$("input[name=loginOption]:checked").val(),b="otp"===a?$("#userOtp").val():$("#userPassword").val();if("otp"===a)if($("#otpInputWrapperFieldError").remove(),userRegistrationModalHelper.validateOtp(b,4)){$("#userOtp").prop("disabled",!0);var c="+"+$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData").dialCode+$("#checkMobileNumber #contactNumber").val();userRegistrationModalHelper.verifyLoginOTP(c,b,verifyOTPCallback)}else nbUtils.showBootstrapFormFieldError("otpInputWrapper","Please Enter a valid 4 digit OTP","focus");else if($("#passwordInputWrapperFieldError").remove(),b&&""!==b){$("#userPassword").prop("disabled",!0);var c="+"+$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData").dialCode+$("#checkMobileNumber #contactNumber").val();userRegistrationModalHelper.verifyLoginPassword(c,b,verifyPasswordCallback)}else nbUtils.showBootstrapFormFieldError("passwordInputWrapper","Please Enter a password to proceed","focus")},sendVerificationOtp=function(a){a&&nbGA.logEvent("ContactOwner","ResendOTP_SignIn-"+userRegistrationModalHelper.getCookie("flow"),{});var b=userRegistrationModalHelper.data_model.phone_number;userRegistrationModalHelper.startOtpSendTimer(30,"otpCountDonw","sendVerificationOtp"),userRegistrationModalHelper.sendVerificationOtp(b,a,sendVerificationOtpCallback),$("#helperMsg").toggleClass("hide"),setTimeout(function(){$("#helperMsg").toggleClass("hide")},3e3)},sendVerificationOtpCallback=function(a){200===a.status?11001==a.statusCode&&$("#helperMsg").text("OTP sent successfully!"):(nbGA.logEvent("ContactOwner","SignIn_failed-otp-"+userRegistrationModalHelper.getCookie("flow"),{}),420==a.status?$("#helperMsg").text(a.message):$("#helperMsg").text("Something went wrong. Please try again later!"))},verifyPasswordCallback=function(a){if($("#userPassword").removeAttr("disabled"),200==a.status){var b;200==a.statusCode?(b=userRegistrationModalHelper.getCookie("flow"),nbGA.logEvent("ContactOwner","SignIn_success-password-"+b,{}),completeFlow(!1),a.data.isUserDisguiseOrNC&&location.reload()):(b=userRegistrationModalHelper.getCookie("flow"),nbGA.logEvent("ContactOwner","SignIn_failed-password-"+b,{}),nbUtils.showBootstrapFormFieldError("passwordInputWrapper",a.message,"focus"))}else nbUtils.showBootstrapFormFieldError("passwordInputWrapper","Something went wrong. Please try again later.","focus")},verifyOTPCallback=function(a){if($("#userOtp").removeAttr("disabled"),200==a.status){var b;200==a.statusCode?(b=userRegistrationModalHelper.getCookie("flow"),nbGA.logEvent("ContactOwner","SignIn_success-otp-"+b,{}),nbAdobeEvents&&nbAdobeEvents.registerEvent({pageName:"otppage",platform:"nb-web",siteSection:pageNameForAdobe+"_"+("default"===b?"topheader":b),flowName:"registration_journey",service:nbAdobeService.getServiceName(service)},"Reg_Submit",{userType:userRegistrationModalHelper.getCookie("loggedInUserStatus"),isLoggedIn:"loggedin",whatsapptoggle:$("#userVerificationModal").find(".whatsApp-loginsignup").find("#WhatsAppOptlogin").prop("checked")?"on":"off",phone:a.data.user_phone,name:a.data.user_name,email:a.data.user_email,userID:a.data.id},{eventName:"signin",eventType:"button click",ctaName:$(".user-registration-v2").find("#buttonWrapper").find("button:visible").text()}),setTimeout(function(){completeFlow(!1)},500)):(b=userRegistrationModalHelper.getCookie("flow"),nbGA.logEvent("ContactOwner","SignIn_failed-otp-"+b,{}),nbUtils.showBootstrapFormFieldError("otpInputWrapper",a.message,"focus"))}else nbUtils.showBootstrapFormFieldError("otpInputWrapper","Something went wrong. Please try again later.","focus")},newUserSignup=function(){var a=$("#newUserName").val(),b=$("#newUserEmail").val();b=b&&b.toLowerCase();var c=userRegistrationModalHelper.getCookie("flow"),d=userRegistrationModalHelper.data_model.phone_number;$(".suggestionText:visible").length>0&&nbGA.logEvent("ContactOwner","ContinueWithWrongEmail-"+userRegistrationModalHelper.getCookie("flow"),{}),!0===continueWithSuggestedEmail&&nbGA.logEvent("ContactOwner","ContinueWithSuggestedEmail-"+userRegistrationModalHelper.getCookie("flow"),{}),$("#newUserSignupButton").attr("disabled",!0),$("#newUserNameInputWrapper").removeClass("has-error"),$("#newUserEmailInputWrapper").removeClass("has-error"),$("#newUserNameInputWrapperFieldError").remove(),$("#newUserEmailInputWrapperFieldError").remove();var e={name:a,email:b,phone:d,flow:c};(whatsappOptChange||whatsappOpt)&&(e.whatsAppOptIn=whatsappOpt,null!=$("#WhatsAppOptlogin").attr("data-source")&&void 0!=$("#WhatsAppOptlogin").attr("data-source")&&(e.whatsAppOptInSource=$("#WhatsAppOptlogin").attr("data-source"))),userRegistrationModalHelper.createNewAccount(e,newUserSignupCallback,mailCheck)},mailCheck=function(){var a=!1;return isMailSuggestion?(isMailSuggestion=!1,a=!1):$("#newUserEmailInputWrapper input[type=email]").mailcheck({domains:domains,topLevelDomains:topLevelDomains,secondLevelDomains:secondLevelDomains,suggested:function(b,c){$(".suggestionText").hide(),$(".suggestionTextMsg").text(""),$(".suggestionText").show(),$(".suggestionTextMsg").html("Did you mean <span>"+c.full+"</span>?"),nbGA.logEvent("ContactOwner","IncorrectEmail-"+userRegistrationModalHelper.getCookie("flow"),{}),continueWithSuggestedEmail=!1,isMailSuggestion=!0,$("#newUserSignupButton").removeAttr("disabled"),a=!0},empty:function(b){$(".suggestionText").hide(),$(".suggestionTextMsg").text(""),isMailSuggestion=!1,a=!1}}),a},newUserSignupCallback=function(a,b){if(200==a.status){var c=userRegistrationModalHelper.getCookie("flow");if(200==a.statusCode){nbGA.logEvent("NewUser",c+"-email",{});var d={content_name:"Normal Registration"};facebookEvent.fbEvent("CompleteRegistration","",d);var e=dateToShortFormat(new Date);if(nbAdobeEvents&&nbAdobeEvents.registerEvent({pageName:"emailpage",platform:"nb-web",siteSection:pageNameForAdobe+"_"+("default"===c?"topheader":c),flowName:"registration_journey",service:nbAdobeService.getServiceName(service)},"Reg_Submit",{userType:userRegistrationModalHelper.getCookie("loggedInUserStatus"),isLoggedIn:"loggedin",whatsapptoggle:$("#userVerificationModal").find(".whatsApp-loginsignup").find("#WhatsAppOptlogin").prop("checked")?"on":"off",phone:b.phone,name:b.name,email:b.email,regDate:e,userID:a.data.id},{eventName:"Signup",eventType:"button click",ctaName:$(".user-registration-v2").find("#buttonWrapper").find("button:visible").text()}),"packersMovers"==c)$("#inter").hasClass("hidden")?adobeEvent.logAdobeEvent("ev_PMlead-intracity"):adobeEvent.logAdobeEvent("ev_PMlead-intercity");else if("rentalAgreement"==c)adobeEvent.logAdobeEvent("ev_RAlead");else{var f=$("#nbpt").val();f="ev_Newuser-"+f.toLowerCase(),adobeEvent.logAdobeEvent(f)}completeFlow(!1)}else 10005==a.statusCode?(nbGA.logEvent("ContactOwner","email_phone_mismatch-"+c,{}),$("#newSignUperrorMsgText").removeClass("hide"),$("#newSignUperrorMsgText").html(a.message+'. <span class="go-to-login-btn" id="takeUserToLoginViaEmail" onclick="takeUserToLoginViaEmail()">Click here</span> to login using Email OTP.')):($("#newSignUperrorMsgText").removeClass("hide"),$("#newSignUperrorMsgText").text(a.message));$("#newUserSignupButton").removeAttr("disabled")}else $("#newUserSignupButton").removeAttr("disabled"),500==a.status?($("#newSignUperrorMsgText").removeClass("hide"),$("#newSignUperrorMsgText").text("Something went wrong. Please try again later.")):901===a.status?nbUtils.showBootstrapFormFieldError("newUserNameInputWrapper","Enter your name","change"):902===a.status?($(".suggestionText").hide(),nbUtils.showBootstrapFormFieldError("newUserEmailInputWrapper","Enter a valid email","change")):903===a.status?($(".suggestionText").hide(),nbUtils.showBootstrapFormFieldError("newUserEmailInputWrapper","Email can not contain +","change")):904===a.status?($(".suggestionText").hide(),nbUtils.showBootstrapFormFieldError("newUserEmailInputWrapper","Enter a valid email","change"),nbUtils.showBootstrapFormFieldError("newUserNameInputWrapper","Enter your name","change")):($("#newSignUperrorMsgText").removeClass("hide"),$("#newSignUperrorMsgText").text(a.responseText))},takeUserToLoginViaEmail=function(){$(".title-wrpper .phone-verification-title").hide(),$(".title-wrpper #title-signinEmail").show();var a=$("#newUserEmailInputWrapper").find("#newUserEmail").val();$("#loginViaEmailContent #emailOtpSent").text(a),$("#buttonWrapper button").hide(),$("#verifyEmailOtpButton").show(),$("#signupContent").slideUp(400,function(){$("#loginViaEmailContent").slideDown(),setTimeout(function(){$("#checkEmailOtp #userEmailOtp").focus()},500)}),$("#newUserSignup").hide(),sendEmailVerificationOtp(!1),nbGA.logEvent("ContactOwner","VerifyEmail-OTP-"+userRegistrationModalHelper.getCookie("flow"),{})},sendEmailVerificationOtp=function(a){var b=$("#newUserEmailInputWrapper").find("#newUserEmail").val();userRegistrationModalHelper.startOtpSendTimer(30,"emailOtpCountDonw","sendEmailVerificationOtp"),userRegistrationModalHelper.sendEmailVerificationOtp(b,a,sendEmailVerificationOtpCallback),$("#emailOtpInputWrapper #helperMsg").toggleClass("hide"),setTimeout(function(){$("#emailOtpInputWrapper #helperMsg").toggleClass("hide")},3e3)},sendEmailVerificationOtpCallback=function(a){200===a.statusCode?$("#emailOtpInputWrapper #helperMsg").text("OTP sent successfully!"):$("#emailOtpInputWrapper #helperMsg").text("Something went wrong. Please try again later!")},verifyEmailOtpLogin=function(){var a=$("#newUserEmailInputWrapper").find("#newUserEmail").val(),b=$("#userEmailOtp").val();$("#verifyEmailOtpButton").prop("disable",!0),$("#emailOtpInputWrapperFieldError").remove(),userRegistrationModalHelper.validateOtp(b,4)?userRegistrationModalHelper.verifyEmailOtp(b,a,verifyEmailOtpLoginCallback):nbUtils.showBootstrapFormFieldError("emailOtpInputWrapper","Please Enter a valid 4 digit OTP","focus")},verifyEmailOtpLoginCallback=function(a){if($("#verifyEmailOtpButton").prop("disable",!0),200==a.status){var b;200==a.statusCode?(completeFlow(!1),b=userRegistrationModalHelper.getCookie("flow"),nbGA.logEvent("ContactOwner","EmailVerified-OTP-"+b,{})):(b=userRegistrationModalHelper.getCookie("flow"),nbGA.logEvent("ContactOwner","SignIn_failed-emailOTP-"+b,{}),nbUtils.showBootstrapFormFieldError("emailOtpInputWrapper","Invalid OTP, please enter a valid OTP","focus"))}else nbUtils.showBootstrapFormFieldError("emailOtpInputWrapper","Something went wrong. Please try again later.","focus")},takeUserToSignUpFlow=function(){$(".title-wrpper .phone-verification-title").hide(),$(".title-wrpper #title-signup").show(),$("#buttonWrapper button").hide(),$("#newUserSignup").show(),$("#loginViaEmailContent").slideUp(400,function(){$("#loginViaEmailContent").hide(),$("#signupContent").slideDown(),setTimeout(function(){$("#newUserEmail").focus()},500)}),$("#newSignUperrorMsgText").addClass("hide"),nbGA.logEvent("ContactOwner","SignUpAgain-email_mismatch-"+userRegistrationModalHelper.getCookie("flow"),{})},completeFlow=function(a){var b=userRegistrationModalHelper.getCookie("flow");userRegistrationModalHelper.postProcessFlow(b,a)},doFacebookSignIn=function(){facebook.doLogin(checkFbLoginStatus)},checkFbLoginStatus=function(a){"connected"===a.status?facebook.getUserDetails(function(a){processUserDetails(a)}):displayAlerts("Failed to Login using Facebook. Please try again later.","error",2e3)},processUserDetails=function(a){a.userPhone=$("#checkMobileNumber").find("input[name=contactNo]").val()||$(".numberInUse").text().replace("+91 -",""),facebook.saveUserDetails(a,onSaveUserDetails)},onSaveUserDetails=function(a){window.location.reload()},checkConflictCookie=function(){var a=userRegistrationModalHelper.getCookie("X-SOCIAL-USER-MISTACH"),b=userRegistrationModalHelper.getCookie("X-SOCIAL-USER-SIGNIN-SUCCESS"),c=userRegistrationModalHelper.getCookie("X-SOCIAL-USER-NO-EMAIL"),d=userRegistrationModalHelper.getCookie("flow");if("true"==a)if("true"==$("#isULIN").val()){nbGA.logEvent("ContactOwner","social_phone_mismatch-"+d,{});userRegistrationModalHelper.getCookie("pmToken")&&"packers-and-movers",userRegistrationModalHelper.prepareConflictScreen(d)}else setCookie("X-SOCIAL-USER-MISTACH","",-1);else"true"==c?userRegistrationModalHelper.renderSignInError():("true"==b&&userRegistrationModalHelper.postProcessFlowFromConflict(d),triggerChat())},continueWithExistingNumber=function(){var a=userRegistrationModalHelper.getCookie("flow");setCookie("X-SOCIAL-USER-MISTACH","",-1),nbGA.logEvent("ContactOwner","UseOldPhone-"+userRegistrationModalHelper.getCookie("flow"),{}),userRegistrationModalHelper.updateSecondaryPhoneNumber(),userRegistrationModalHelper.postProcessFlowFromConflict(a)},updateContactNumber=function(){$("#conflictScreenContent > #landingPage").addClass("hide"),$("#conflictScreenContent > #updateNumber").removeClass("hide"),$("#updateNumberOtp").val(""),$("#otpInputWrapperFieldError").remove(),nbGA.logEvent("ContactOwner","UseNewPhone-"+userRegistrationModalHelper.getCookie("flow"),{}),sendUpdatePhoneOtp()},sendUpdatePhoneOtp=function(a){var b=userRegistrationModalHelper.data_model.new_phone_number;userRegistrationModalHelper.startOtpSendTimer(30,"updateNumberPtpCountDonw","sendUpdatePhoneOtp"),userRegistrationModalHelper.sendUpdatePhoneOtp(b,a,sendUpdatePhoneOtpCallback),$("#updateNumberHelperMsg").toggleClass("hide"),setTimeout(function(){$("#updateNumberHelperMsg").toggleClass("hide")},3e3)},sendUpdatePhoneOtpCallback=function(a){200==a.status&&11001==a.statusCode?$("#updateNumberHelperMsg").text("OTP sent successfully"):200==a.status&&11011==a.statusCode?$("#updateNumberHelperMsg").text("Phone number can not be updated to international number. Please call +919741700000 for more help."):$("#updateNumberHelperMsg").text("Something went wrong. Please try again later.")};validateAndUpdatePhone=function(){var a=userRegistrationModalHelper.data_model.new_phone_number,b=$("#updateNumberOtp").val();userRegistrationModalHelper.validateAndUpdatePhone(a,b,"number_change",validateAndUpdatePhoneCallback)},validateAndUpdatePhoneCallback=function(a){if(200==a.status&&11003==a.statusCode){setCookie("X-SOCIAL-USER-MISTACH","",-1),setTimeout(function(){completeFlow(!0)},2e3),$(".errorMsgText").addClass("hide");var b=userRegistrationModalHelper.getCookie("flow");nbGA.logEvent("ContactOwner","SignIn_success_phoneUpdate-"+b,{})}else 11005===a.statusCode?nbUtils.showBootstrapFormFieldError("updateOtpInputWrapper","Please enter 6 digit OTP","focus"):nbUtils.showBootstrapFormFieldError("updateOtpInputWrapper","Something went wrong. Please try again later.","focus")};var goBack=function(){nbGA.logEvent("ContactOwner","newPhoneVerify-goBack",{}),$("#conflictScreenContent > #landingPage").removeClass("hide"),$("#conflictScreenContent > #updateNumber").addClass("hide")},whatsappHandler=function(a){200==a.status&&"TRUE"==a.data.status&&($(".switch input").prop("checked",!0),$(".whatsapp-opt-wrapper-login").hide())},openTnc=function(){var a=userRegistrationModalHelper.getCookie("flow");$("#phoneVerification").is(":visible")?nbGA.logEvent("ContactOwner","TnC_First-"+a,{}):$("#loginContent").is(":visible")?nbGA.logEvent("ContactOwner","TnC_SignIn-"+a,{}):$("#signupContent").is(":visible")&&nbGA.logEvent("ContactOwner","TnC_SignUp-"+a,{})};