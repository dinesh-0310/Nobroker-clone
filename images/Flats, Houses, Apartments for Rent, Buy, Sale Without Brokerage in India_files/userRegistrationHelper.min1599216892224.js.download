!function(a,b){"function"==typeof define&&define.amd?define(["userRegistrationHelper"],b):a.userRegistrationHelper=b(a.options)}(window,function(options){var userRegistrationHelper={otpSent:!1,updateOtpSent:!1,fromPage:null,flow:null,postHandler:null,preHandler:null,closeHandler:null,dataModel:{},signUpFlowConstants:{login_signup:{showSideBar:!0,sideBarDetails:{primaryHeader:"Create NoBroker Account",secondaryHeader:"100% Genuine Owners, 0% Brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to verify your identity",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to login to your account",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Login",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Login",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Sign Up",mainSocialHeader:"We do not share your personal details with anyone",newUserSignUpNextButtonTitle:"Sign Up",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Sign Up",defaultPostHandler:null,currentFlow:"loginSignup"},shortlist:{showSideBar:!0,sideBarDetails:{primaryHeader:"Shortlist Property ",secondaryHeader:"100% Genuine Owners, 0% Brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to verify your identity",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Shortlist Property",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Shortlist Property",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"One step sign-up to Shortlist",newUserSignUpNextButtonTitle:"Shortlist Property",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Shortlist Property",defaultPostHandler:"shortlistPostHandler",currentFlow:"shortlistSignup"},contactOwner:{showSideBar:!0,sideBarDetails:{primaryHeader:"Get Owner Details ",secondaryHeader:"100% Genuine Owners, 0% Brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Owner details will be sent on the registered number",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to get owner details",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Get Owner Details",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Get Owner Details",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"One step sign-up to get owner details",newUserSignUpNextButtonTitle:"Get Owner Details",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Get Owner Details",defaultPostHandler:"contactOwnerPostHandler",currentFlow:"contactOwnerSignup"},chat:{showSideBar:!0,sideBarDetails:{primaryHeader:"Chat With Owner ",secondaryHeader:"",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Owner  will be able to reach you on the number entered below",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Chat with Owner",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Chat with Owner",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"One step sign-up to chat with owner",newUserSignUpNextButtonTitle:"Start Messaging",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Chat with Owner",defaultPostHandler:"chatPostHandler",currentFlow:"chatSignup"},packersMovers:{showSideBar:!0,sideBarDetails:{primaryHeader:"Check Movement Price",secondaryHeader:"Get Hassle-Free Relocation Services",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/pnmBG.svg",backgroundColor:"#F7E4BE",isbackgroundGradient:!1,textTheme:"#464646"},verifyForm:{loginPopUpTitle:"Get movement status update on your registered number",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Get Quotes",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Get Quotes",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"One step process to get movement price",newUserSignUpNextButtonTitle:"Get Quotes",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Get Quotes",defaultPostHandler:"pnmPostHandler",currentFlow:"packersMoversSignup"},rentalAgreement:{showSideBar:!0,sideBarDetails:{primaryHeader:"Get Rental Agreement Home Delivered!",secondaryHeader:"",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Create Agreement",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Create Agreement",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"One step process to get rental agreement",newUserSignUpNextButtonTitle:"Create Agreement",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Create Agreement",defaultPostHandler:"raCreatePostHandler",currentFlow:"rentalAgreementSignup"},premiumFilters:{showSideBar:!0,sideBarDetails:{primaryHeader:"Unlock Premium Filters",secondaryHeader:"Improve your search by using premium filters",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Unlock",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Unlock",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"Please signup before unlocking premium filters",newUserSignUpNextButtonTitle:"Unlock",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Unlock",defaultPostHandler:"pfPostHandler",currentFlow:"premiumFiltersSignup"},builderSignup:{showSideBar:!0,sideBarDetails:{primaryHeader:"",secondaryHeader:"",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/builder/builderSignUpBG.svg",backgroundColor:"#F7E4BE",isbackgroundGradient:!1,textTheme:"#464646"},verifyForm:{loginPopUpTitle:"Register your details so that we can reach you",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Show Interest",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Show Interest",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"One step process to finish registering your interest",newUserSignUpNextButtonTitle:"Show Interest",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Show Interest",defaultPostHandler:"builderPostHandler",defaultPreHandler:"builderPreHandler",currentFlow:"builderSignup"},plans:{showSideBar:!0,sideBarDetails:{primaryHeader:"Choose a plan",secondaryHeader:"SAVE THOUSANDS on brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Subscribe",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Subscribe",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"Please signup before subscribing to our plans",newUserSignUpNextButtonTitle:"Subscribe",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Subscribe",defaultPostHandler:"planPostHandler",currentFlow:"tenantPlansSignup"},ownerPlans:{showSideBar:!0,sideBarDetails:{primaryHeader:"Choose a plan",secondaryHeader:"SAVE THOUSANDS on brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Subscribe",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Subscribe",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"Please signup before subscribing to our plans",newUserSignUpNextButtonTitle:"Subscribe",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Subscribe",defaultPostHandler:"ownerPlanPostHandler",currentFlow:"ownerPlansSignup"},buyerPlans:{showSideBar:!0,sideBarDetails:{primaryHeader:"Choose a plan",secondaryHeader:"SAVE THOUSANDS on brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Subscribe",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Subscribe",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"Please signup before subscribing to our plans",newUserSignUpNextButtonTitle:"Subscribe",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Subscribe",defaultPostHandler:"BuyerPlanModule.buyerPlanPostHandler",currentFlow:"buyerPlansSignup"},sellerPlans:{showSideBar:!0,sideBarDetails:{primaryHeader:"Choose a plan",secondaryHeader:"SAVE THOUSANDS on brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Subscribe",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Subscribe",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"Please signup before subscribing to our plans",newUserSignUpNextButtonTitle:"Subscribe",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Subscribe",defaultPostHandler:"SellerPlanModule.sellerPlanPostHandler",currentFlow:"sellerPlansSignup"},commercialPlans:{showSideBar:!0,sideBarDetails:{primaryHeader:"Choose a plan",secondaryHeader:"SAVE THOUSANDS on brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!1},verifyForm:{loginPopUpTitle:"Your contact number is necessary for us to do all the communications",mobileExistNextButtonTitle:"Next",closeButtonTitle:"Close"},loginOptionsFields:{loginOptionsTitle:"Use OTP or password to continue",passwordRadioText:"I've Password",otpRadioText:"Generate OTP"},socialSignInError:"Unable to get Email from your social account.Please try with different account to SignIn/SignUp.",verifyOtpNextButtonTitle:"Subscribe",verifyOtpBackButtonTitle:"Back",verifyPasswordNextButtonTitle:"Subscribe",verifyPasswordBackButtonTitle:"Back",submitButtonText:"Submit",mainSocialHeader:"Please signup before subscribing to our plans",newUserSignUpNextButtonTitle:"Subscribe",newUserSignUpBackButtonTitle:"Back",updatePhoneText:"Subscribe",defaultPostHandler:"commercialPlanModule.commercialPlanPostHandler"},testFlow:{showSideBar:!0,sideBarDetails:{primaryHeader:"Test Header",secondaryHeader:"100% Genuine Owners wee, 0% Brokerage.",showPhoneNumberText:"Mobile Number:",backgroundImageUrl:"/static/img/userVerification/modalBg.png",backgroundColor:"#009587",isbackgroundGradient:!0,backgroundGradientColorStart:"#f4f5d7",backgroundGradientColorEnd:"#f5d9a2",backgroundGradientPosition:"to bottom",textTheme:"#464646",textTheme:"#464646",primaryIcon:"/static/img/builder/logo1.jpg"},verifyOtpNextButtonTitle:"Next1"}},registerFlow:function(flow,data,preHandler,postHandler,closeHandler){var product=$("#nbpt").val();nbEvents.logUserRegistration({actionType:"userDetPopup",propType:product});var self=this;if(self.preHandler=preHandler,self.postHandler=postHandler,self.closeHandler=closeHandler,data&&self.saveModalDataToCookie(data),preHandler){var context=eval(preHandler)();self.renderUserRegModal(context)}else self.preProcessFlow(flow)},preProcessFlow:function(a,b){var c=this;c.isNotEmpty(a)||(a="login/signup"),c.prepareFlowConstants(a,b)},prepareFlowConstants:function(a,b){var c=this,d=c.serializeData(a);b?b(d):c.renderUserRegModal(d)},serializeData:function(a){var b=this,c={},d=JSON.stringify(b.signUpFlowConstants.login_signup);if(c=JSON.parse(d),""==a&&(a="login_signup"),!b.checkIfEmpty(a)){var e=b.signUpFlowConstants[a];if(b.isNotEmpty(c))for(var f in c)b.isNotEmpty(f)&&b.isNotEmpty(e[f])?c[f]=e[f]:c[f]=d[f]}return c},renderUserRegModal:function(a){var b=this,c=$("#userRegistrationContentDiv").html(),d=Handlebars.compile(c),e="",f=!1;if("true"==this.getCookie("skipFirstStep")){var g=this.getCookie("preFillphone");g&&(e=g,f=!0),this.setCookie("preFillphone","")}a.defaultPhone=e;var h=d(a);if($("#userVerificationModal").empty(),$("#userVerificationModal").append(h),b.makeCssRender(a),$("#userVerificationModal").modal("show"),hj("trigger","signup-start"),"rentalAgreement"==this.getCookie("flow"))$("#checkMobileNumber #contactNumber").intlTelInput({nationalMode:!0,separateDialCode:!0,initialCountry:"in",onlyCountries:["in"],autoPlaceholder:"off",utilsScript:"https://assets.nobroker.in/static/lib/universal/intlTelInputUtil.js"});else if($("#checkMobileNumber #contactNumber").intlTelInput({nationalMode:!0,separateDialCode:!0,autoPlaceholder:"off",formatOnDisplay:!1,utilsScript:"https://assets.nobroker.in/static/lib/universal/intlTelInputUtil.js"}),$("#checkMobileNumber #contactNumber").intlTelInput("setNumber",e),e&&f){b.dataModel.phone1=e;try{$(".numberInUse").text(e),$(".verifyForm").addClass("hide"),$(".newUserSignUpFields").removeClass("hide").removeAttr("disabled"),$(".numberIndicator").removeClass("hide"),$(".termsAndCond").removeClass("hide");var i=this.getCookie("flow");nbGA.logEvent("ContactOwner","newPhone-"+i,{}),nbEvents.logUserRegistration({propType:$("#nbpt").val().toLowerCase(),actionType:"newPhoneReg"}),FB.init({appId:window.fb_app_id,cookie:!0,xfbml:!0,version:"v2.8"})}catch(a){}}b.registerKeyEvents()},prepareConflictScreen:function(flow){var self=this;if(self.fromPage=flow,self.isNotEmpty(flow))if(self.isNotEmpty(self.signUpFlowConstants[flow]))if(self.signUpFlowConstants[flow].defaultPreHandler&&null!=self.signUpFlowConstants[flow].defaultPreHandler){var context=eval(self.signUpFlowConstants[flow].defaultPreHandler)();self.renderConflictScreen(context)}else self.preProcessFlow(flow,self.renderConflictScreen);else self.preProcessFlow(flow,self.renderConflictScreen);else self.preProcessFlow("login_signup",self.renderConflictScreen)},renderConflictScreen:function(a){var b=this,c=$("#userRegistrationContentDiv").html(),d=Handlebars.compile(c),e=d(a);$("#userVerificationModal").empty(),$("#userVerificationModal").append(e),userRegistrationHelper.makeCssRender(a);var f=b.getCookie("X-SOCIAL-EXISTING-USER-PHONE"),g=b.getCookie("X-SOCIAL-USER-PHONE"),h=$("#loggedInUserEmail").val();$("#emailId").text(h),$("input[name=oldPhone]").val(f),$("input[name=newPhone], .updatedNum").val(g),$(".existingPhone").text(f),$(".newPhone").text(g),b.fromPage&&$("#userVerificationModal").data("fromPage",b.fromPage),$("#userVerificationModal").addClass("conflict").modal("show"),hj("trigger","signup-start"),"rentalAgreement"==b.getCookie("flow")?$("input[name=newPhone]").intlTelInput({nationalMode:!0,separateDialCode:!0,initialCountry:"in",onlyCountries:["in"],autoPlaceholder:"off",utilsScript:"https://assets.nobroker.in/static/lib/universal/intlTelInputUtil.js"}):$("input[name=newPhone]").intlTelInput({nationalMode:!0,separateDialCode:!0,autoPlaceholder:"off",utilsScript:"https://assets.nobroker.in/static/lib/universal/intlTelInputUtil.js"})},makeCssRender:function(a){a.sideBarDetails.isbackgroundGradient?$("#titleSideBar").css("background","url("+a.sideBarDetails.backgroundImageUrl+") no-repeat center bottom, linear-gradient("+a.sideBarDetails.backgroundGradientPosition+", "+a.sideBarDetails.backgroundGradientColorStart+","+a.sideBarDetails.backgroundGradientColorEnd+")"):$("#titleSideBar").css("background","url("+a.sideBarDetails.backgroundImageUrl+") no-repeat center bottom"+a.sideBarDetails.backgroundColor),a.sideBarDetails.textTheme&&$("#titleSideBar").css("color",a.sideBarDetails.textTheme),a.sideBarDetails.primaryIcon&&("builderSignup"==this.getCookie("flow")?$("#primaryIcon").css("background-image","url(//images.nobroker.in/static/img/builder/"+a.sideBarDetails.primaryIcon+")"):$("#primaryIcon").css("background","url("+a.sideBarDetails.primaryIcon+") no-repeat center"))},postProcessFlow:function(flow,args){var self=this,context=self.serializeData(flow),savedFlow=context.defaultPostHandler;$("#userVerificationModal").modal("hide"),self.postHandler?eval(self.postHandler)(args):self.isNotEmpty(savedFlow)?eval(savedFlow)():self.completeFlow(!1)},renderSignInError:function(a){var b=this,c=b.serializeData(a),d=$("#userRegistrationContentDiv").html(),e=Handlebars.compile(d),f=e(c);$("#userVerificationModal").empty(),$("#userVerificationModal").append(f),userRegistrationHelper.makeCssRender(c),$("#socialSignInError").removeClass("hide"),$("#loginPopUpTitle").addClass("hide");var g=b.getCookie("X-SOCIAL-USER-PHONE");$("#contactNumber").val(g),$("#userVerificationModal").modal("show"),this.setCookie("X-SOCIAL-USER-NO-EMAIL","",-1)},postProcessFlowFromConflict:function(flow){var self=this,context=self.serializeData(flow),savedFlow=context.defaultPostHandler;if($("#userVerificationModal").modal("hide"),self.isNotEmpty(savedFlow))eval(savedFlow)();else if("true"==$("#isULIN").val()){nbGA.logEvent("NewUser","ContactOwner-social",{});var propId=self.getCookie("propId"),fromPage=self.getCookie("fromPage");propId&&("shortlist"==fromPage?shortlistProperty(propId):"tenantSchedule"!=fromPage?invokeContactOwnerCall(propId,"","",fromPage):invokeContactOwnerCall(propId,"",function(){bookTenantAppointment()},fromPage),self.clearPropIdCookie()),self.setCookie("X-SOCIAL-USER-SIGNIN-SUCCESS","",-1)}else self.setCookie("X-SOCIAL-USER-SIGNIN-SUCCESS","",-1),self.clearPropIdCookie()},checkIfPhoneExists:function(a,b,c){var d=this,e=$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData");if(e&&e.dialCode?d.dataModel.phone1="+"+e.dialCode+a:d.dataModel.phone1="+91"+a,void 0!==e&&null!=e&&null!=e.dialCode&&void 0!=e.dialCode&&null!=a&&void 0!=a)var f="/api/v1/account/+"+e.dialCode+a+"/check?create=true";else var g=$("#checkMobileNumber").find("input[name=contactNo]").val().replace(/\s+/g,""),f="/api/v1/account/+91"+g+"/check?create=true";c&&"builderSignup"==c?f=f+"?flow="+c+"&buildingId="+d.getCookie("buildingId"):c&&"packersMovers"==c?f=f+"?flow="+c:c&&"rentalAgreement"==c&&(f=f+"?flow="+c);var h=$("#checkMobileNumber #contactNumber").intlTelInput("getNumber");return""==h&&($("#checkMobileNumber #contactNumber").intlTelInput({nationalMode:!0,separateDialCode:!0,autoPlaceholder:"off",utilsScript:"https://assets.nobroker.in/static/lib/universal/intlTelInputUtil.js"}),""==(h=$("#checkMobileNumber #contactNumber").intlTelInput("getNumber"))&&(h="+91"+a)),91==e.dialCode&&10!=a.length?void nbUtils.showFormError("contactNumberDiv","Enter a valid phone number.","focus"):(1==$("#WhatsAppOptSignup").prop("checked")&&(status=!0,f=f+"&whatsAppOptIn="+status,null!=$("#WhatsAppOptSignup").attr("data-source")&&void 0!=$("#WhatsAppOptSignup").attr("data-source")&&(f=f+"&whatsAppOptInSource="+$("#WhatsAppOptSignup").attr("data-source"))),this.checkIfEmpty(a)?void nbUtils.showFormError("contactNumberDiv","Enter a valid phone number.","focus"):this.validateIndianPhoneNumberOnly(h,e)&&a.length>=4?void $.ajax({url:f,method:"GET",success:function(a){b&&b(a)},error:function(a){b&&b(a)}}):void nbUtils.showFormError("contactNumberDiv","Enter a valid phone number.","focus"))},sendVerificationOtp:function(a,b,c){var d=this,e={};e.phone=a,"India"!=$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData").name?$("#checkMobileNumber #otp4Digit").attr("placeholder","Enter OTP sent to email"):$("#checkMobileNumber #otp4Digit").attr("placeholder","Enter OTP sent on mobile"),!b&&this.otpSent||$.ajax({url:"/api/v1/account/user/otp/send",data:e,method:"POST",success:function(a){c&&c(a),d.otpSent=!0},error:function(a){c&&c(a)}})},verifyOTP:function(a,b,c){var d=$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData"),a=$("#checkMobileNumber #contactNumber").intlTelInput("getNumber");if(this.validateIndianPhoneNumberOnly(a,d)&&this.validateOtp(b,4)){var e={};e.phone=a,e.otp=b,1==$("#WhatsAppOptSignup").prop("checked")&&(status=!0,e.whatsAppOptIn=status,e.whatsAppOptInSource=$("#WhatsAppOptSignup").attr("data-source")),$.ajax({url:"/api/v1/account/login/otp/",method:"POST",data:e,success:function(a){c&&c(a)},error:function(a){c&&c(a)}})}else nbUtils.showFormError("otp4Digit","Enter a valid 4 digit otp.","focus")},verifyPassword:function(a,b,c){var d=this,e=$("#checkMobileNumber #contactNumber").intlTelInput("getSelectedCountryData"),a=$("#checkMobileNumber #contactNumber").intlTelInput("getNumber");if(this.validateIndianPhoneNumberOnly(a,e)&&!d.checkIfEmpty(b)){var f={};f.phone=a,f.password=b,1==$("#WhatsAppOptSignup").prop("checked")&&(status=!0,f.whatsAppOptIn=status,f.whatsAppOptInSource=$("#WhatsAppOptSignup").attr("data-source")),$.ajax({url:"/api/v1/account/login/password",method:"POST",data:f,success:function(a){c&&c(a)},error:function(a){c&&c(a)}})}},sendUpdatePhoneOtp:function(a,b,c){if(b||!this.updateOtpSent){var d={};d.phone=a,$.ajax({url:"/api/v1/account/otp/send",method:"POST",data:d,success:function(a){c&&c(a)},error:function(a){c&&c(a)}})}},validateAndUpdatePhone:function(a,b,c,d){var e=$("input[name=newPhone]").intlTelInput("getSelectedCountryData"),a=$("input[name=newPhone]").val();if(this.validateOtp(b,6)&&this.validateIndianPhoneNumberOnly(a,e)){var f={};f.phone=a,f.otp=b,f.flow=c,$.ajax({url:"/api/v1/account/otp/validate",method:"POST",data:f,success:function(a){d&&d(a)},error:function(a){d&&d(a)}})}else nbUtils.showFormError("otp6Digit","Please enter 6 digit OTP","focus")},createNewAccount:function(a,b,c,d,e){var f=this;nbEvents.detectPrivateMode(function(g){if(nbEvents.setUserRegistarionParamsInCookie(g),f.checkIfEmpty(a))nbUtils.showFormError("newUserName","Enter a name","focus"),$("#newUserSignupButton").removeAttr("disabled");else if(f.validateEmail(c)){var h={};h.name=a,h.phone=b,h.email=c,h.flow=d,1==$("#WhatsAppOptSignup").prop("checked")&&(status=!0,h.whatsAppOptIn=status,h.whatsAppOptInSource=$("#WhatsAppOptSignup").attr("data-source")),$.ajax({url:"/api/v1/account/create",method:"POST",data:h,headers:{"X-DEVICE-ICM":g},success:function(a){e&&e(a)},error:function(a){e&&e(a)}})}else c.indexOf("+")>0?nbUtils.showFormError("newUserEmail","Email can not contain +","focus"):nbUtils.showFormError("newUserEmail","Enter a valid email","focus"),$("#newUserSignupButton").removeAttr("disabled")}),f.saveUserDetailsToLocalStorage()},validatePhone:function(a){return!!/^[123456789]\d{9}$/.test(a)},validateEmail:function(a){return!!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},checkIfEmpty:function(a){return!(a.length>0)},validateOtp:function(a,b){var c="[0-9]{"+b+"}";return c=new RegExp(c),!!c.test(a)},isNotEmpty:function(a){return void 0!==a&&null!=a},saveUserDetailsToLocalStorage:function(){var a=$("form.signUpForm input[name=name]").val(),b=$("form.signUpForm input[name=email]").val();$("form.signUpForm input[name=phone]").val();try{localStorage&&(localStorage.userName=a,localStorage.userEmail=b,localStorage.userPhone=uphone)}catch(a){}},getCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""},setCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toUTCString();document.cookie=a+"="+b+"; "+e},savePropIdToCookie:function(){var a=this,b=$("#userVerificationModal").data("propId"),c=$("#userVerificationModal").data("fromPage"),d=$("#userVerificationModal").data("propertyRent");a.setCookie("propertyRent",d,.0035),a.setCookie("propId",b,.0035),a.setCookie("fromPage",c,.0035),"shortlist"==c&&(a.setCookie("buttonId",$("#userVerificationModal").data("buttonId")),a.setCookie("detailPage",$("#userVerificationModal").data("detailPage")))},saveModalDataToCookie:function(a){var b=this;if(b.isNotEmpty(a))for(var c in a)b.isNotEmpty(c)&&b.isNotEmpty(a[c])&&b.setCookie(c,a[c],.0035)},clearPropIdCookie:function(){this.setCookie("propId","",-1),this.setCookie("fromPage","",-1),this.setCookie("propertyRent","",-1),this.setCookie("flow","",-1),this.setCookie("fromPage","",-1)},completeFlow:function(a){},executeCloseHandler:function(){this.closeHandler&&eval(this.closeHandler)()},registerKeyEvents:function(){var a=this;$(document).off("keydown"),$(document).on("keydown",function(b){a.handleKeyPressEvent(b)}),$(document).on("change keydown","#contactNumber",function(a){if($("#contactNumber").val().startsWith("0")){var b=$("#contactNumber").val().replace(/^0/,"");$("#contactNumber").val(b)}if($("#contactNumber").val().startsWith("91")&&$("#contactNumber").val().length>10){var b=$("#contactNumber").val().replace("+91","");$("#contactNumber").val(b)}}),$(document).on("focus","#newSignupForm #newUserName",function(){$("#newSignupForm #newUserName").attr("autocomplete","name"),$("#newSignupForm #newUserName").attr("required","required")}),$(document).on("focus","#newSignupForm #newUserEmail",function(){$("#newSignupForm #newUserEmail").attr("autocomplete","email")})},handleKeyPressEvent:function(a){switch(a.which){case 13:if($("#mobileExistNextButtonTitle").is(":visible"))a.preventDefault(),checkPhoneExistance();else if($("#verifyOtpNextButtonTitle").is(":visible"))a.preventDefault(),verifyOTP();else if($("#verifyPasswordNextButtonTitle").is(":visible"))a.preventDefault(),verifyPassword();else if($("#newUserSignUpNextButtonTitle").is(":visible"))a.preventDefault(),newUserSignup();else{if(!$("#validateAndUpdatePhoneBtn").is(":visible"))return;a.preventDefault(),validateAndUpdatePhone()}break;default:return}},validateIndianPhoneNumberOnly:function(a,b){if(91==b.dialCode){if(!/^[0-9]{10}$/.test(a.replace("+91","")))return!1}return!0}};return userRegistrationHelper});