function doSignInJS(){if($("#user_new")[0].checkValidity()){var a="";void 0!=$("#userName").val().trim().match("(^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$)")?a="email":void 0!=$("#userName").val().trim().match("^[+0-9]+$")&&(a="phone");var b=$("#user_new").serialize();b=b+"&userType="+a,performSignIn(b)}else $("#hiddenSignInButton").click()}function smarcLockInit(){navigator.credentials?(nbGA.logEvent("oneClickSignIn","smartLock-show"),navigator.credentials.get({password:!0,federated:{providers:["https://accounts.google.com","https://facebook.com"]}}).then(function(a){a?(nbGA.logEvent("oneClickSignIn","smartLock-signIn"),"federated"==a.type?a.provider.includes("google")?googleSigninHelper.smartlockStoreGoogleData(a):facebook.smartlockStoreFBData(a):smartlockDoSignInJS(a.id,a.password)):(nbGA.logEvent("oneClickSignIn","smartLock-cancel"),nbGA.logEvent("oneClickSignIn","yoloGoogle-show"),void 0!==googleYoloHint&&googleYoloHint())})):(nbGA.logEvent("oneClickSignIn","yoloGoogle-show"),void 0!==googleYoloHint&&googleYoloHint())}function smartlockDoSignInJS(a,b){var c="";c="email",void 0!=a.match("(^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$)")?(c="email",a=encodeURI(a)):void 0!=a.match("^[+0-9]+$")&&(c="phone");var d="email="+a+"&password="+b+"&_spring_security_remember_me=true";d=d+"&userType="+c,performSignIn(d)}function smartLockStore(){if(navigator.credentials){navigator.credentials.create({password:{id:$("#userName").val(),password:$("#user_password").val()}}).then(function(a){navigator.credentials.store(a)})}}function validateEmail(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}function googleYoloHint(){googleyolo.hint(CONFIG_hint).then(function(a){nbGA.logEvent("oneClickSignIn","yoloGoogle-signIn");navigator.credentials.create({federated:{id:a.id,name:a.displayName,provider:"https://accounts.google.com"}}).then(function(a){navigator.credentials.store(a),googleSigninHelper.smartlockStoreGoogleData(a)})},function(a){a&&"userCanceled"==a.type&&nbGA.logEvent("oneClickSignIn","yoloGoogle-close")});var a=new MutationObserver(function(b){b.forEach(function(b){b.addedNodes.forEach(function(b){"IFRAME"===b.nodeName&&b.src.includes("smartlock.google.com/iframe/")&&(a.disconnect(),b.classList.add("nb-google-frame"))})})});a.observe(window.document.body,{childList:!0})}var PUBLIC_CLIENT_ID="262114437683-gcpe77t5bdg51m0m88egcghgce0r1vib.apps.googleusercontent.com",CONFIG={supportedAuthMethods:["https://accounts.google.com","googleyolo://id-and-password","https://facebook.com"],supportedIdTokenProviders:[{uri:"https://accounts.google.com",clientId:PUBLIC_CLIENT_ID}]},CONFIG_hint={supportedAuthMethods:["https://accounts.google.com"],supportedIdTokenProviders:[{uri:"https://accounts.google.com",clientId:PUBLIC_CLIENT_ID}]};document.getElementById("signInButton").addEventListener("click",function(a){return a.stopImmediatePropagation(),smartLockStore(),doSignInJS(),!1}),$("#getOTPbtn").click(function(){var a=$("#userName").val();if(void 0!=a&&""!=a){if(!validateEmail(a)&&!isNaN(parseInt(a))){if(13==a.length&&a.startsWith("+91")&&(a=a.replace("+91","")),12==a.length&&a.startsWith("91")&&(a=a.replace("91","")),10!==a.length)return void sendOTP();var b="+91",c="/api/v1/account/"+b+a+"/check?create=true";$.ajax({url:c,method:"GET",success:function(c){if(c&&10002===c.statusCode){nbGA.logEvent("SignUp","askEmail-phoneOnly-OTP"),$("#dosignin").modal("hide");var d={flow:"login_signup",preFillphone:b+a,skipFirstStep:!0};userRegistrationHelper.registerFlow("login_signup",d,null,function(){"true"!=$("#isULIN").val()&&window.location.reload()})}else sendOTP()},error:function(a){sendOTP()}})}}else sendOTP()}),$("#forgotPwdBtnHeader").click(function(){forgotPassword()}),$("#registerBtnHeader").click(function(){hideSignIn();var a={};a.flow="login_signup",userRegistrationModalHelper.registerFlow("default",a,null,postSignUpHandler)}),$("#inputEmail #userName").on("change",function(){try{setCustomValidity("")}catch(a){}}),$("#inputPassword input").on("change",function(){try{setCustomValidity("")}catch(a){}}),$("#inputEmail #userName").on("invalid",function(){setCustomValidity("Please enter a valid email or 10 digit mobile number")}),$("#dosignin").on("show.bs.modal",function(){$("#userName").val($("#dosignin").data("userName")),$("#signInError").text($("#dosignin").data("message")),$("#signInError").show(),hideLoading()}),$("#user_new").bind("keypress",function(a){13==(a.keyCode||a.which)&&(a.preventDefault(),smartLockStore(),doSignInJS())}),$(function(){initAuth2()});