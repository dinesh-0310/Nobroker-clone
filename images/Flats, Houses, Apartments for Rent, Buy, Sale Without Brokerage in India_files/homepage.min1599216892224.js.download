function showLastSearchLink(a){$("#homeSearchFilter").is(":visible")?$(".lastSearch").addClass("hide"):$(".lastSearch").removeClass("hide");var b="",c=($(".lastSearchedLocation"),a),d=c.locality+", "+c.city;$(".lastSearchedLocationName").text(d);var e="/property",f=c.type,g=c.furnishing,h=c.localityId,i=c.locality,j=c.city,k=c.searchType;k="commercial_rent"==m?"commercial/rent":"commercial_buy"==m?"commercial/buy":c.searchType;var l;c.sharedAccomodation&&(l=!0);var m=k;"buy"==k&&(m="sale"),"shared"==k&&(m="rent"),"commercial_rent"==k&&(m="commercial/rent"),"commercial_buy"==k&&(m="commercial/buy");var n={RK1:"1 RK",BHK1:"1 BHK",BHK2:"2 BHK",BHK3:"3 BHK",BHK4:"4 BHK",BHK4PLUS:"4+ BHK"},o=[{lat:c.latitude,lon:c.longitude,placeId:h,placeName:i}];if(_.isEmpty(m)||_.isEmpty(j)||_.isEmpty(i)||_.isEmpty(o)||(e=e+"/"+m+"/"+j+"/"+i+"?searchParam="+window.btoa(JSON.stringify(o))),"rent"==k&&(e+=void 0!==l&&null!=l&&1==l?"&sharedAccomodation=1":"&sharedAccomodation=0"),!_.isEmpty(f)&&void 0!=f)if(e=e+"&type="+f,f.indexOf(",")>=0){for(var p=f.split(","),q=0;q<p.length;q++)n[p[q]]&&(b+=n[p[q]],q!=p.length-1&&(b+=", "));b+=" in "}else b=n[f]+" in ";_.isEmpty(g)||void 0==g||(e=e+"&furnishing="+g);var r=$(".lastSearchLocDetails");b+=d,r.text(b),$("#lastSearchAnchor").attr("href",e),fetchMatchedCount(e,a)}function showMultipleLastSearchLink(a){$("#homeSearchFilter").is(":visible")?$(".lastSearch").addClass("hide"):$(".lastSearch").removeClass("hide");var b,c="",d=a;d&&(b=JSON.parse(atob(d.searchParam)));var e="";if(b.forEach(function(a){if(void 0==a.placeName||null==a.placeName)return void $(".lastSearch").addClass("hide");e+=a.placeName+", "}),null==d.city||void 0==d.city)return void $(".lastSearch").addClass("hide");e+=d.city,$(".lastSearchedLocationName").text(e);var f="/property",g=d.type,h=d.furnishing,i=d.locality||"multiple",j=d.city,k=d.searchType;k="commercial_rent"==m?"commercial/rent":"commercial_buy"==m?"commercial/buy":d.searchType;var l;d.sharedAccomodation&&(l=!0);var m=k;"buy"==k&&(m="sale"),"shared"==k&&(m="rent"),"commercial_rent"==k&&(m="commercial/rent"),"commercial_buy"==k&&(m="commercial/buy");var n={RK1:"1 RK",BHK1:"1 BHK",BHK2:"2 BHK",BHK3:"3 BHK",BHK4:"4 BHK",BHK4PLUS:"4+ BHK"};if(_.isEmpty(m)||_.isEmpty(j)||_.isEmpty(i)||_.isEmpty(d.searchParam)||(f=f+"/"+m+"/"+j+"/"+i+"?searchParam="+d.searchParam),"rent"==k&&(f+=void 0!==l&&null!=l&&1==l?"&sharedAccomodation=1":"&sharedAccomodation=0"),!_.isEmpty(g)&&void 0!=g)if(f=f+"&type="+g,g.indexOf(",")>=0){for(var o=g.split(","),p=0;p<o.length;p++)n[o[p]]&&(c+=n[o[p]],p!=o.length-1&&(c+=", "));c+=" in "}else c=n[g]+" in ";_.isEmpty(h)||void 0==h||(f=f+"&furnishing="+h);var q=$(".lastSearchLocDetails");c+=e,q.text(c),$("#lastSearchAnchor").attr("href",f),nbGA.logEvent("search","ContinueLastSearch-show",{}),fetchMatchedCount(f,a)}function fetchMatchedCount(a,b){var c=a.split("?")[1];$.ajax({url:"/api/v1/property/search/new",type:"POST",data:{productType:b.searchType,filterParam:c,sinceMillis:b.searchedOn},beforeSend:function(){var a=JSON.parse(localStorage.getItem("lastSearchMatchedReq"));return!(a&&a.productType==b.searchType&&a.filterParam==c&&a.checked_on>Date.now()-18e5&&a.matched_count>-1)||0!=a.matched_count&&($("#lastSearchedNew").text(a.matched_count),$(".badge-default").removeClass("hide"),$(".badge-default").addClass("show"),!1)},success:function(a){a&&"success"==a.status&&(a.data.matched_count>2&&($("#lastSearchedNew").text(a.data.matched_count),$(".badge-default").removeClass("hide"),$(".badge-default").addClass("show")),lastSearchMatchedReq={},lastSearchMatchedReq.filterParam=c,lastSearchMatchedReq.productType=b.searchType,lastSearchMatchedReq.checked_on=Date.now(),lastSearchMatchedReq.matched_count=a.data.matched_count,window.localStorage.lastSearchMatchedReq=JSON.stringify(lastSearchMatchedReq),window.localStorage.lastSearch=JSON.stringify(b))},error:function(a){}})}function getLastSearchFromLocalStorage(){try{var a=JSON.parse(localStorage.getItem("lastSearch"));a&&showMultipleLastSearchLink(a)}catch(a){}}function sendAppDownloadLinkSMS(){$("#mobileNumberError").hide(),$("#mobileNumber").checkValidity()?(ga("send","event","AndroidApp","click","Download now button on download app modal "+$("#appMobileNumber").val()),$.post("/sendAppSMS?mobile="+$("#mobileNumber").val()),$("#mobile-form-container").text("Please follow the link on sms to download the app")):$("#mobileNumberError").show()}function onCityOptionChange(a,b){b.stopPropagation(),$("#nbCitySelector").removeClass("active");var c,d=$(a).data("key"),e=$("#nbpt").val();$("#nbrc").val()!==d&&(c=!0),$("#nbrc").val(d),e=e.toLowerCase(),"buy"==e?($(".selectedcity").html(buy_cities[d]),$(".selectedcity").data("key",d)):($(".selectedcity").html(rent_cities[d]),$(".selectedcity").data("key",d)),c&&multipleLocationSelectorHelper.resetInputField({inputEl:"#locationGoogle",preselectedLocalities:homepage_selected_localities});var f="/"+d+"/"+e;window.history.pushState(null,null,domainProtocol+"//"+window.location.host+f),nbAutoComplete.updateCityBound(d)}function openPayRentNow(a){var b="/pay-property-rent-online";"commercial"===a?b+="?nbFr=HOME-BAR-COMMERCIAL":"rent"===a&&(b+="?nbFr=HOME-BAR-RENT"),sendBannerAdobeEvent({ctaName:" pay rent now",url:b,bannerType:"pay_rent"}),window.open(b,"_blank")}function onCommPropTypeChange(a){var b=$(a).data("key"),c=$("#nbpt").val();c=c.toLowerCase(),$(".selectedCommType").html(comm_types[b]),$("#nbpt").val(b),$(".commercialTypeSelector").css("border","none");var d="/"+$("#nbrc").val()+"/"+b.toLowerCase();window.history.pushState(null,null,domainProtocol+"//"+window.location.host+d)}function init(){"RENT"==$("#nbpt").val()&&($("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterShifting,#rentPropertyType,#kyrHomePageBanner").removeClass("hide")),"BUY"==$("#nbpt").val()&&($("#rentServices,#rentPropertyType,#searchFilterShifting").addClass("hide"),$("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterPropertyStatus,#buyServices,#homeLoansHomePageBanner").removeClass("hide")),"PG"==$("#nbpt").val()&&($("#ourServices").find(".text-center").addClass("hide"),$("#nbBHKSelector").addClass("hide"),$("#searchFilterSharingType,#rentPropertyType,#kyrHomePageBanner,#nbGenderSelector").removeClass("hide")),"SHARED"==$("#nbpt").val()&&($("#nbBHKSelector").addClass("hide"),$("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterFlatmateSharingType,#rentPropertyType,#kyrHomePageBanner,#nbGenderSelector").removeClass("hide")),"COMMERCIAL_RENT"!=$("#nbpt").val()&&"COMMERCIAL_BUY"!=$("#nbpt").val()||($("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterCommercialPropertyType,#commercialPropertyOwnershipType,#packersMoversBanner").removeClass("hide"),"COMMERCIAL_BUY"==$("#nbpt").val()&&($("#buyServices").removeClass("hide"),$("#rentServices").addClass("hide"),$("#commercialPropertyOwnershipType #commercialBuy").attr("checked",!0))),"SHARED"!=$("#nbpt").val()&&"PG"!=$("#nbpt").val()||($("input[name=rent-property-type]:checked").attr("checked",!1),$("#rentPropertyType").find("#"+$("#nbpt").val().toLowerCase()).attr("checked",!0))}function openResaleServices(a){var b="";switch(a){case"loan":var c="";"true"==$("#isULIN").val()&&(c=window.btoa("name="+$("#loggedInUserName").val()+"&phone="+$("#loggedInUserPhone").val()+"&email="+$("#loggedInUserEmail").val()));var d="/redirectUrl?redirectUrl=http://loans.nobroker.in&click="+c+"&utm_source=nbhome&utm_campaign=homeloans&type=loans&nbFr=HOME-TILE-BUY";sendBannerAdobeEvent({ctaName:"home loan",url:d,bannerType:"home_loan"}),window.open(d,"_blank"),nbGA.logEvent("PageOpen","home-homeloans",{});break;case"legal":var c="";"true"==$("#isULIN").val()&&(c=window.btoa("name="+$("#loggedInUserName").val()+"&phone="+$("#loggedInUserPhone").val()+"&email="+$("#loggedInUserEmail").val())),b="/redirectUrl?redirectUrl=http://services.nobroker.in/legalassistance&click="+c+"&utm_source=nbhome&utm_campaign=legaldocs&type=legalDoc&nbFr=HOME-TILE-BUY",sendBannerAdobeEvent({ctaName:"property legal services",url:b,bannerType:"legal_assistance"}),window.open(b,"_blank"),nbGA.logEvent("PageOpen","home-legaldocs",{});break;case"interior":b="/redirectUrl?redirectUrl=http://services.nobroker.in?utm_source=nbhome&utm_campaign=interiors&type=homeInterior",sendBannerAdobeEvent({ctaName:"interiors",url:b,bannerType:"interior"}),window.open(b,"_blank"),nbGA.logEvent("PageOpen","home-interiors",{});break;case"inspection":window.open("/redirectUrl?redirectUrl=http://services.nobroker.in/homeinspection?utm_source=nbhome&utm_campaign=inspection&type=homeInspection","_blank"),nbGA.logEvent("PageOpen","home-inspection",{});break;case"sales-agreement":var e=$("#loggedInUserId").val();b="/redirectUrl?redirectUrl=http://services.nobroker.in/saleagreement?utm_source=nbhome&utm_campaign=saleagreement&type=SaleAgreement"+(e?"&uid="+e:""),sendBannerAdobeEvent({ctaName:"sales agreement",url:b,bannerType:"sale_agreement"}),window.open(b,"_blank"),nbGA.logEvent("PageOpen","home-SaleAgreement-buy",{});break;case"vastu":window.open("/redirectUrl?redirectUrl=http://services.nobroker.in/vastu?utm_source=nbhome&utm_campaign=vastu&type=homeVastu","_blank"),nbGA.logEvent("PageOpen","home-vastu",{});break;case"builder-project":b="/redirectUrl?redirectUrl=http://buyer.nobroker.in/new-projects&utm_source=dekstopSite&utm_medium=homeTile&type=builderCard&nbFr=HOME-TILE-BUY",sendBannerAdobeEvent({ctaName:"new builder projects",url:b,bannerType:"builder"}),window.open(b,"_blank"),nbGA.logEvent("PageOpen","home-builder",{})}}function openRentServices(a){var b="";switch(a){case"pnm":"COMMERCIAL_RENT"==$("#nbpt").val()?(b="/redirectUrl?redirectUrl=/packers-and-movers?nbFr=HOME-TILE-COMMERCIAL&type=packersMovers",sendBannerAdobeEvent({ctaName:" packers and movers",url:b,bannerType:"packers_movers"}),window.open(b,"_self")):(b="/redirectUrl?redirectUrl=/packers-and-movers?nbFr=HOME-TILE-RENT&type=packersMovers",sendBannerAdobeEvent({ctaName:" packers and movers",url:b,bannerType:"packers_movers"}),window.open(b,"_self"));break;case"pnm-bar":b="/redirectUrl?redirectUrl=/packers-and-movers?nbFr=HOME-BANNER-COMMERCIAL&type=packersMovers",sendBannerAdobeEvent({ctaName:" packers and movers",url:b,bannerType:"packers_movers"}),window.open(b,"_self");break;case"hs":"COMMERCIAL_RENT"==$("#nbpt").val()?(b="/redirectUrl?redirectUrl=/home-services&type=maintenance&nbFr=HOME-TILE-COMMERCIAL",sendBannerAdobeEvent({ctaName:" home services",url:b,bannerType:"home_services"}),window.open(b,"_blank")):(b="/redirectUrl?redirectUrl=/home-services&type=maintenance&nbFr=HOME-TILE-RENT",sendBannerAdobeEvent({ctaName:" home services",url:b,bannerType:"home_services"}),window.open(b,"_blank"));break;case"rne":"COMMERCIAL_RENT"==$("#nbpt").val()?(b="/redirectUrl?redirectUrl=/refer-and-earn&nbFr=HOME-TILE-COMMERCIAL&type=ReferNEarn",sendBannerAdobeEvent({ctaName:" refer & earn",url:b,bannerType:"refer_earn"}),window.open(b,"_blank")):(b="/redirectUrl?redirectUrl=/refer-and-earn&nbFr=HOME-TILE-RENT&type=ReferNEarn",sendBannerAdobeEvent({ctaName:" refer & earn",url:b,bannerType:"refer_earn"}),window.open(b,"_blank"));break;case"rental_agreement":"COMMERCIAL_RENT"==$("#nbpt").val()?(b="/redirectUrl?redirectUrl=/online-rental-agreements&nbFr=HOME-TILE-COMMERCIAL&type=RentAgreement",sendBannerAdobeEvent({ctaName:"rental agreement",url:b,bannerType:"rental_agreement"}),window.open(b,"_blank")):(b="/redirectUrl?redirectUrl=/online-rental-agreements&nbFr=HOME-TILE-RENT&type=RentAgreement",sendBannerAdobeEvent({ctaName:"rental agreement",url:b,bannerType:"rental_agreement"}),window.open(b,"_blank"));break;case"payRent":"COMMERCIAL_RENT"==$("#nbpt").val()?(b="/pay-property-rent-online?nbFr=HOME-TILE-COMMERCIAL",sendBannerAdobeEvent({ctaName:"pay rent",url:b,bannerType:"pay_rent"}),window.open(b,"_blank")):(b="/pay-property-rent-online?nbFr=HOME-TILE-RENT",sendBannerAdobeEvent({ctaName:"pay rent",url:b,bannerType:"pay_rent"}),window.open(b,"_blank"))}}function openCommonServices(a){var b="",c=null;"true"==$("#isULIN").val()&&(c=window.btoa("name="+$("#loggedInUserName").val()+"&phone="+$("#loggedInUserPhone").val()+"&email="+$("#loggedInUserEmail").val()));var d=$("#loggedInUserId").val();switch(a){case"nri":b="/redirectUrl?redirectUrl=https://nri.nobroker.in?utm_source=nri_home"+(c?"&uid="+d+"&click="+c:""),sendBannerAdobeEvent({ctaName:"nobroker for nri",url:b,bannerType:"NRI"}),window.open(b,"_blank")}}function sendBannerAdobeEvent(a){nbUtils.bannerClickAdobeEvent({ctaName:a.ctaName,ctaURL:a.url,bannerType:a.bannerType,position:"center"})}function onClickPYPButtonAdobeEvent(a){localStorage.setItem("fromPageAdobeEvent",a),nbAdobeEvents.registerEvent({pageName:"post_property_page",platform:"nb-web",siteSection:a,flowName:"owner_journey",service:nbAdobeService.getServiceName($("#nbpt").val())},"start_posting",getuserInfoForAdobeEvent(),{eventName:"new_property_creation",eventType:"button_click",ctaName:"homepage_centralbanner"===a?"Post free property ad":"For Property owners"})}var rent_cities={mumbai:"Mumbai",bangalore:"Bangalore",pune:"Pune",chennai:"Chennai",gurgaon:"Gurgaon",hyderabad:"Hyderabad",delhi:"Delhi",noida:"Noida",greater_noida:"Greater Noida",ghaziabad:"Ghaziabad",faridabad:"Faridabad"},buy_cities={mumbai:"Mumbai",bangalore:"Bangalore",pune:"Pune",chennai:"Chennai",gurgaon:"Gurgaon",hyderabad:"Hyderabad",delhi:"Delhi",noida:"Noida",greater_noida:"Greater Noida",ghaziabad:"Ghaziabad",faridabad:"Faridabad"},comm_types={COMMERCIAL_RENT:"Rent",COMMERCIAL_BUY:"Buy"},domainProtocol=window.location.protocol;$(".nb-productType-switch button").on("click",function(a){if(el=$(a.target),$("#nbCitySelector,#nbBHKSelector,#nbGenderSelector,#nbShiftingTimeSelector,#nbCommercialTypeSelector,#searchFilterPropertyStatusSelector").removeClass("active"),"rent"===el.data("name")||!el.hasClass("active"))if("rent"==el.data("name"))$("#nbpt").val("RENT"),$.post("/product?type=RENT",function(a,b){nbGA.logEvent("search","home-rent-toggle",{});var c=$(".selectedcity").data("key"),d="/"+c+"/rent";window.history.pushState(null,null,domainProtocol+"//"+window.location.host+d),$(".nb-productType-switch button").removeClass("active previous"),$(".nb-productType-switch .rent").addClass("active").prev().addClass("previous"),$("#nbBHKSelector").removeClass("hide"),$("#nbGenderSelector").addClass("hide"),$(".selectedcity").html(rent_cities[c]),$(".selectedcity").data("key",c),$("#nbrc").val(c),$("#searchFilterTypeLabel").text("BHK Type:"),$("#serviceProductType").text("Tenant"),$("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterShifting,#rentPropertyType,#rentServices,#kyrHomePageBanner").removeClass("hide"),$("#searchFilterPropertyStatus,#searchFilterSharingType,#searchFilterFlatmateSharingType,#searchFilterCommercialPropertyType,#commercialPropertyOwnershipType,#buyServices").addClass("hide")});else if("sale"==el.data("name"))$("#nbpt").val("BUY"),$.post("/product?type=BUY",function(a,b){nbGA.logEvent("search","home-buy-toggle",{});var c=$(".selectedcity").data("key");"bangalore"!=c&&"mumbai"!=c?(urlToLoad="/bangalore/buy",$(".selectedcity").html("Bangalore"),$(".selectedcity").data("key","bangalore")):(urlToLoad="/"+c+"/buy",$(".selectedcity").html(buy_cities[c]),$(".selectedcity").data("key",c)),window.history.pushState(null,null,domainProtocol+"//"+window.location.host+urlToLoad),$(".nb-productType-switch button").removeClass("active previous"),$(".nb-productType-switch .resale").addClass("active").prev().addClass("previous"),$("#nbBHKSelector").removeClass("hide"),$("#nbGenderSelector").addClass("hide"),$("#nbrc").val(c),$("#searchFilterTypeLabel").text("BHK Type:"),$("#serviceProductType").text("Buyer"),$("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterShifting,#searchFilterSharingType,#searchFilterFlatmateSharingType,#searchFilterCommercialPropertyType,#rentPropertyType,#commercialPropertyOwnershipType,#rentServices,#packersMoversBanner").addClass("hide"),$("#searchFilterPropertyStatus,#buyServices,#homeLoansHomePageBanner").removeClass("hide")});else if("pg"==el.data("name"))$("#nbpt").val("PG"),$.post("/product?type=PG",function(a,b){nbGA.logEvent("search","home-pg-toggle",{});var c=$(".selectedcity").data("key"),d="/"+c+"/pg";window.history.pushState(null,null,domainProtocol+"//"+window.location.host+d),$("#nbBHKSelector").addClass("hide"),$("#nbGenderSelector").removeClass("hide"),$(".selectedcity").html(rent_cities[c]),$(".selectedcity").data("key",c),$("#nbrc").val(c),$("#searchFilterTypeLabel").text("Tenant Type:"),$("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterShifting, #searchFilterPropertyStatus,#searchFilterFlatmateSharingType,#searchFilterCommercialPropertyType,#commercialPropertyOwnershipType").addClass("hide"),$("#searchFilterSharingType,#rentPropertyType").removeClass("hide")});else if("shared"==el.data("name"))$("#nbpt").val("SHARED"),$.post("/product?type=SHARED",function(a,b){var c=$(".selectedcity").data("key");nbGA.logEvent("search","home-shared-toggle",{});var d="/"+c+"/flatmates";window.history.pushState(null,null,domainProtocol+"//"+window.location.host+d),$("#nbBHKSelector").addClass("hide"),$("#nbGenderSelector").removeClass("hide"),$(".selectedcity").html(rent_cities[c]),$(".selectedcity").data("key",c),$("#nbrc").val(c),$("#searchFilterTypeLabel").text("Tenant Type:"),$("#ourServices").find(".text-center").addClass("hide"),$("#searchFilterFlatmateSharingType,#rentPropertyType").removeClass("hide"),$("#searchFilterPropertyStatus,#searchFilterSharingType,#searchFilterShifting,#searchFilterCommercialPropertyType,#commercialPropertyOwnershipType").addClass("hide")});else if("commercial"==el.data("name")){$("#nbpt").val(""),$("#searchFilterTypeLabel").text("Property Type:");var b;$.post("/product?type=COMMERCIAL",function(a,c){var d=$("#nbpt").val(),e=$(".selectedcity").data("key");nbGA.logEvent("search","home-commercial-toggle",{}),$(".nb-productType-switch button").removeClass("active previous"),$(".nb-productType-switch .commercial").addClass("active").prev().addClass("previous"),$("#nbBHKSelector").addClass("hide"),$("#nbGenderSelector").addClass("hide"),$(".selectedcity").html(rent_cities[e]),$(".selectedcity").data("key",e),$("#nbrc").val(e),$("#ourServices").find(".text-center").addClass("hide"),$("#packersMoversBanner").removeClass("hide"),$("#nbCommercialTypeSelector").removeClass("hide"),$("#nbCommercialTypeSelector li").remove(),$(".selectedCommType").html(comm_types[d]);for(b in comm_types)$(".commercialTypeSelector").append("<li><a onclick='onCommPropTypeChange(this);' class='typeoption' data-key="+b+">"+comm_types[b]+"</a></li>");$("#houseOwnersBtn").text("For Property Owners"),$("#orSeperatorHP .seperator").text("Are you a Property Owner?")})}else"commercial_rent"==el.data("name")?($("#nbpt").val(""),$("#serviceProductType").text("Tenant"),$("#searchFilterCommercialPropertyType,#rentServices").removeClass("hide"),$("#searchFilterPropertyStatus,#searchFilterSharingType,#searchFilterFlatmateSharingType,#searchFilterShifting,#rentPropertyType,#buyServices").addClass("hide"),$.post("/product?type=COMMERCIAL_RENT",function(a,c){var d=$(".selectedcity").data("key"),e="/"+d+"/commercial_rent";window.history.pushState(null,null,domainProtocol+"//"+window.location.host+e),$(".nb-productType-switch button").removeClass("active previous"),$(".nb-productType-switch .commercial").addClass("active").prev().addClass("previous"),$("#nbBHKSelector").addClass("hide"),$("#nbGenderSelector").addClass("hide"),$(".selectedcity").html(rent_cities[d]),$(".selectedcity").data("key",d),$("#nbrc").val(d),$("#commercialPropertyOwnershipType").removeClass("hide"),$(".selectedCommType").html(comm_types.COMMERCIAL_RENT);for(b in comm_types)$(".commercialTypeSelector").append("<li><a onclick='onCommPropTypeChange(this);' class='typeoption' data-key="+b+">"+comm_types[b]+"</a></li>");$("#ourServices").find(".text-center").addClass("hide"),$("#packersMoversBanner").removeClass("hide"),$("#houseOwnersBtn").text("For Property Owners"),$("#orSeperatorHP .seperator").text("Are you a Property Owner?"),$("#nbpt").val("COMMERCIAL_RENT"),nbGA.createCookie("nbpt","COMMERCIAL_RENT",30)})):"commercial_buy"==el.data("name")&&($("#nbpt").val(""),$.post("/product?type=COMMERCIAL_BUY",function(a,c){var d=$(".selectedcity").data("key");console.log("comm selected"),$(".nb-productType-switch button").removeClass("active previous"),$(".nb-productType-switch .commercial").addClass("active").prev().addClass("previous"),$("#nbGenderSelector,#nbBHKSelector").addClass("hide"),$(".selectedcity").html(rent_cities[d]),$(".selectedcity").data("key",d),$("#nbrc").val(d),$("#commercialPropertyOwnershipType").removeClass("hide"),$(".selectedCommType").html(comm_types.COMMERCIAL_BUY);for(b in comm_types)$(".commercialTypeSelector").append("<li><a onclick='onCommPropTypeChange(this);' class='typeoption' data-key="+b+">"+comm_types[b]+"</a></li>");$("#ourServices").find(".text-center").addClass("hide"),$("#packersMoversBanner").removeClass("hide"),$("#houseOwnersBtn").text("For Property Owners"),$("#orSeperatorHP .seperator").text("Are you a Property Owner?")}))}),$(document).ready(function(){"true"==$("#isULIN").val()&&(getCookie("pushNotiFy")||loggedInUserisAdmin||askNotificationPermission({flow:"HOMEPAGE"})),$(".cityoption").click(function(a){onCityOptionChange(this,a),nbGA.logEvent("search","home-city-"+$("#nbpt").val().toLowerCase(),{})}),$("#appAndroidDll").click(function(a){nbGA.logEvent("android_download","home-page-android",{})}),$("#appIosDll").click(function(a){nbGA.logEvent("ios_download","home-page-ios",{})}),nbEvents.logPageView({pageType:"Home"}),$("#ourServices .serviceItem.rentalAgreement").on("click",function(){nbGA.logEvent("PageOpen","homeRentalAgreement",{})}),$("#ourServices .serviceItem.lifestyleReport").on("click",function(){nbGA.logEvent("PageOpen","homeLifeScore",{})}),$("#ourServices .serviceItem.clickAndEarn").on("click",function(){nbGA.logEvent("PageOpen","homeClicknEarn",{})}),$("#ourServices .serviceItem.rentReceipts").on("click",function(){nbGA.logEvent("PageOpen","homeRentReceipts",{})}),$("#ourServices .serviceItem.nri").on("click",function(){nbGA.logEvent("PageOpen","homeNRI",{})}),$("#ourServices .serviceItem.packersMovers").on("click",function(){nbGA.logEvent("PageOpen","homePackersMovers",{})}),$("#pypButHP").on("click",function(){onClickPYPButtonAdobeEvent("homepage_centralbanner"),nbGA.logEvent("PageOpen","postYourPropertyButton",{})}),$("#houseOwnersBtn").on("click",function(){onClickPYPButtonAdobeEvent("homepage_topheader"),nbGA.logEvent("PageOpen","houseOwnerButton",{})}),$("#lastSearchAnchor").on("click",function(){try{var a=$(".lastSearch a").prop("href").split("/"),b=JSON.parse(window.atob(a[6].split("=")[1]+"=")),c=[];b.forEach(function(a){c.push(a.placeName)});var d={searchType:a[4],searchCitySelected:a[5],searchLocality:c.join("|")};nbAdobeEvents.registerEvent({pageName:"homepage",platform:"nb-web",siteSection:"homepage_search",flowName:"search_journey",service:nbAdobeService.getServiceName($("#nbpt").val())},"Search_HP",getuserInfoForAdobeEvent(),{eventName:"search",eventType:"button click",ctaName:"search button"},d)}catch(a){}nbGA.logEvent("search","home-previous",{})}),$(".enquire-btn").on("click",function(){nbGA.logEvent("PageOpen","InstaCorporate",{})}),$("#commingSoonSignUp").on("click",function(){nbGA.logEvent("SignUp","home-header-open",{})}),$("#contactUsTab").on("click",function(){nbGA.logEvent("Support","home-contactUs",{})}),$("#locationGoogle").change(function(){nbGA.logEvent("search","home-locality",{})}),nbAdobeEvents.registerEvent({pageName:"homepage",platform:"nb-web",siteSection:"homepage",flowName:"search_journey",service:nbAdobeService.getServiceName($("#nbpt").val())},null,getuserInfoForAdobeEvent())}),$("#locationGoogle").on("input keydown",function(a){if($("#locationGoogle").val().length<1?$(".recentSearch").removeClass("hide"):$(".recentSearch").addClass("hide"),40===a.keyCode){if(!$(".recentSearch").hasClass("hide")){var b=$(".recentSearch").find(".recentSearch-item").length;if(b>0)if(a.preventDefault(),$(".recentSearch").find(".recentSelected").length>0){var c=$(".recentSearch").find(".recentSelected").data("index");c>0&&c<b&&($(".recentSearch").find(".recentSelected").find(".map-icon").removeClass("recentSearchSelectedIcon"),$(".recentSearch").find(".recentSelected").find(".map-icon").addClass("recentSearchIcon"),$(".recentSearch").find(".recentSelected").removeClass("recentSelected"),$(".recentSearch-item[data-index='"+(c+1)+"']").addClass("recentSelected"),$(".recentSearch-item[data-index='"+(c+1)+"']").find(".map-icon").removeClass("recentSearchIcon"),$(".recentSearch-item[data-index='"+(c+1)+"']").find(".map-icon").addClass("recentSearchSelectedIcon"))}else $(".recentSearch .recentSearch-item:first").addClass("recentSelected"),$(".recentSearch .recentSearch-item:first").find(".map-icon").removeClass("recentSearchIcon"),$(".recentSearch .recentSearch-item:first").find(".map-icon").addClass("recentSearchSelectedIcon")}}else if(38===a.keyCode){if(!$(".recentSearch").hasClass("hide")){var b=$(".recentSearch").find(".recentSearch-item").length;if(b>0&&(a.preventDefault(),$(".recentSearch").find(".recentSelected").length>0)){var c=$(".recentSearch").find(".recentSelected").data("index");c>1&&c<=b&&($(".recentSearch").find(".recentSelected").find(".map-icon").removeClass("recentSearchSelectedIcon"),$(".recentSearch").find(".recentSelected").find(".map-icon").addClass("recentSearchIcon"),$(".recentSearch").find(".recentSelected").removeClass("recentSelected"),$(".recentSearch-item[data-index='"+(c-1)+"']").addClass("recentSelected"),$(".recentSearch-item[data-index='"+(c-1)+"']").find(".map-icon").removeClass("recentSearchIcon"),$(".recentSearch-item[data-index='"+(c-1)+"']").find(".map-icon").addClass("recentSearchSelectedIcon"))}}}else if(13===a.keyCode){if(!$(".recentSearch").hasClass("hide")){var b=$(".recentSearch").find(".recentSearch-item").length;b>0&&(a.preventDefault(),$(".recentSearch").find(".recentSelected").click())}}else if(8===a.keyCode){var d={inputEl:"#locationGoogle",inputElContainer:"#selectedLocalities",currentLocEl:"#currentLocationPicker",preselectedLocalities:homepage_selected_localities,parentContainer:"#homePageLocalitySearch",isNavSearch:!1};multipleLocationSelectorHelper.removeChipOnBackspace(d)}return!0}),$(function(){if("true"==$("#isULIN").val())try{nbFirebase&&nbFirebase.getLastSearchedMultiLocations(loggedinUserId,function(a){if(a)if(_.isEmpty(a))$("#locationGoogleClickWrapper").click();else{var b=_.sortBy(a,"searchedOn").reverse()[0];showMultipleLastSearchLink(b)}})}catch(a){}else $("#locationGoogleClickWrapper").click();$("#nbTravelTimeFilter").is(":visible")||$("#homeSearchFilter").is(":visible")?$(".lastSearch").hide():$(".lastSearch").show()}),$("#locationGoogle,#locationGoogleClickWrapper").on("click",function(a){$(".lastSearch").addClass("hide"),$("#locationGoogle").focus();var b;$.each($(".nb-productType-switch button"),function(a,c){var d=$(c);d.hasClass("active")&&(b=d.data("name").toUpperCase())}),"SALE"==b&&(b="BUY");try{recentSearchData=localStorage[b]}catch(a){}$(".recentSearch").empty();var c=$("#locationGoogle").offset();return $(".recentSearch").css("position","absolute"),$(".recentSearch").css("left",c.left),$("#locationGoogle").val().length<1?$(".recentSearch").removeClass("hide"):$(".recentSearch").addClass("hide"),$("#homeSearchFilter").is(":visible")||$("#homeSearchFilter").slideToggle(500),!0}),$("#lastSearchAnchor").on("click",function(){nbGA.logEvent("PageOpen","ContinueLastSearch",{})}),$(document).on("change","input[name=rent-property-type]",function(){$("#"+$("input[name=rent-property-type]:checked").val()+"Selector").click()}),$(document).on("change","input[name=commercial-property-ownership-type]",function(){var a="commercial_rent"===$("input[name=commercial-property-ownership-type]:checked").val()?"COMMERCIAL_RENT":"COMMERCIAL_BUY";$("#nbpt").val(a),nbGA.createCookie("nbpt",a,30);var b=$(".selectedcity").data("key"),c="/"+b+"/"+$("input[name=commercial-property-ownership-type]:checked").val();window.history.pushState(null,null,domainProtocol+"//"+window.location.host+c),"COMMERCIAL_RENT"===a?($("#rentServices").removeClass("hide"),$("#buyServices").addClass("hide"),$("#serviceProductType").text("Tenant")):($("#rentServices").addClass("hide"),$("#buyServices").removeClass("hide"),$("#serviceProductType").text("Buyer"))}),$(document).on("click",".each-prediction",function(){var a=$(this).attr("data-id");nbAutoComplete.getPlaceData(a,placeChange,"locationGoogle")}),window.onload=init();