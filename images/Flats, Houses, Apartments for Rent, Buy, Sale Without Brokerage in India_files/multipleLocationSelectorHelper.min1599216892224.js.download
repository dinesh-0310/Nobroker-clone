!function(a,b){"function"==typeof define&&define.amd?define(["multipleLocationSelectorHelper"],b):a.multipleLocationSelectorHelper=b(a.options)}(window,function(a){return{addSelectedLocalityChip:function(a,b,c){var d,e,f=this,g=a.isCurrentLocation?"Near Me":a.placeObj.name||a.placeObj.placeName;a.isCurrentLocation||(a.placeObj.geometry?(d="function"==typeof a.placeObj.geometry.location.lat?a.placeObj.geometry.location.lat():a.placeObj.geometry.location.lat,e="function"==typeof a.placeObj.geometry.location.lng?a.placeObj.geometry.location.lng():a.placeObj.geometry.location.lng):(d=a.placeObj.lat,e=a.placeObj.lng||a.placeObj.lon));var h=g?g.substring(0,30):g,i='<span id="'+a.chipId+a.preselectedLocalities.length+'" class="selected-localtiy" data-value="'+h+'" title="'+g+'" data-place_id='+a.placeObj.place_id+">"+g+'<span class="remove-chip-icon mdi mdi-navigation-close" onclick="'+a.removeMethod+'(event)" data-action="removeChip"></span></span>',j={};j=a.isCurrentLocation?{lat:a.placeObj.lat,lon:a.placeObj.lng,placeName:g,placeId:"nearMe"}:{lat:d,lon:e,placeId:a.placeObj.place_id,placeName:g},a.preselectedLocalities.push(j),b?(a.prepend?$(c.$el).find(a.chipContainerEl).prepend(i):$(c.$el).find(a.chipContainerEl).append(i),$(c.$el).find(a.chipContainerEl).removeClass("hide")):(f.changePlaceHolder(a.preselectedLocalities,a.inputEl),$(a.chipContainerEl).append(i),$(a.chipContainerEl).removeClass("hide")),!0!==a.isMobile&&(homepage_selected_localities.length>=3&&(a.currentLocEl&&$(a.currentLocEl).addClass("hide"),$(a.inputEl).attr("disabled",!0)),a.isNavSearch?f.changeInputELeftPadding(a.inputEl,a.chipContainerEl):f.changeHomepageInputElLeftPadding(a.inputEl,a.chipContainerEl))},changeHomepageInputElLeftPadding:function(a,b){var c=0===$(b).width()?10:$(b).width()+5;$(a).css("padding-left",c),$(a).focus()},changeInputELeftPadding:function(a,b,c){var d=0===$(b).width()?10:$(b).width()+5;$(a).css("padding-left",d),c||$(a).focus()},removeSelectedLocalityEl:function(a){var b=this,c=a.preselectedLocalities.findIndex(function(b){return b.placeName===a.chipEl.data("value")}),d=a.preselectedLocalities.findIndex(function(a){return"Near Me"===a.placeName});"Near Me"!==a.chipEl.data("value")&&-1!==d||a.currentLocEl&&$(a.currentLocEl).removeClass("hide"),a.preselectedLocalities.length>=3&&$(a.inputEl).attr("disabled",!1),a.preselectedLocalities.splice(c,1),a.chipEl.remove(),a.isNavSearch?b.changeInputELeftPadding(a.inputEl,a.inputElContainer):b.changeHomepageInputElLeftPadding(a.inputEl,a.inputElContainer),b.changePlaceHolder(a.preselectedLocalities,a.inputEl),1===a.preselectedLocalities.length?checkEstablishmentType(a.preselectedLocalities[0].placeId):0===a.preselectedLocalities.length&&b.clearTravelTimeFilter()},clearTravelTimeFilter:function(){$("#nbTravelTimeFilter").length>0&&$("#nbTravelTimeFilter").is(":visible")&&$("#nbTravelTimeFilter").addClass("hide")},removeChipOnBackspace:function(a){var b=this;if($(a.inputEl).val().length<1){var c=a.preselectedLocalities.findIndex(function(a){return"Near Me"===a.placeName});a.preselectedLocalities.length>0&&("Near Me"!==a.preselectedLocalities[a.preselectedLocalities.length-1].placeName&&-1!==c||a.currentLocEl&&$(a.currentLocEl).removeClass("hide"),a.preselectedLocalities.pop(),$(a.parentContainer).find(".selected-localtiy").last().remove(),a.isNavSearch?b.changeInputELeftPadding(a.inputEl,a.inputElContainer):b.changeHomepageInputElLeftPadding(a.inputEl,a.inputElContainer),b.changePlaceHolder(a.preselectedLocalities,a.inputEl),1===a.preselectedLocalities.length?checkEstablishmentType(a.preselectedLocalities[0].placeId):0===a.preselectedLocalities.length&&nbUtils.clearTravelTimeFilter())}},prefillChips:function(a){a.preselectedLocalities.forEach(function(b,c){var d='<span id="'+a.chipId+c+'" class="selected-localtiy" data-value="'+b.placeName+'" title="'+b.placeName+'">'+b.placeName+'<span class="remove-chip-icon" onclick="'+a.removeMethod+'(event)"></span></span>';$(a.chipContainerEl).append(d)}),$(a.chipContainerEl).removeClass("hide"),this.changeInputELeftPadding(a.inputEl,a.chipContainerEl,!0),a.preselectedLocalities.length>=3&&$(a.inputEl).attr("disabled",!0),this.changePlaceHolder(a.preselectedLocalities,a.inputEl)},getLocalityPlaceId:function(a,b){return b?a.find(function(a){return!0===a.showMap}).placeId:a.length>1?null:a[0].placeId},getMultipleLocationDisplayName:function(a){return a.length>1?a[0].placeName+" +"+(a.length-1):homepage_selected_localities[0].placeName},fillLocationInfoPopoverContent:function(a){var b="";return a.forEach(function(c,d){b+=c.placeName,b+=d===a.length-1?"":", "}),b},changePlaceHolder:function(a,b){0===a.length?$(b).attr("placeholder","Search upto 3 localities or landmarks"):3===a.length?$(b).attr("placeholder",""):$(b).attr("placeholder","Add more...")},resetInputField:function(a){var b=this;$("#selectedLocalities").empty(),$(a.inputEl).val(""),a.preselectedLocalities.length=0,b.changePlaceHolder(a.preselectedLocalities,a.inputEl),$(a.inputEl).css("padding-left","10px"),$(a.inputEl).focus(),$(a.inputEl).attr("disabled",!1)}}});