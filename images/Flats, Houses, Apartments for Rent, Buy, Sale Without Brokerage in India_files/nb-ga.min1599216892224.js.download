var nbGA={getUrlParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},extractGenericParamsForEvent:function(){var a={};this.getFromLocalStorage("prevClientId")&&(a.prevClientId=this.getFromLocalStorage("prevClientId")),"undefined"!=typeof ga&&void 0!==ga.getAll&&ga.getAll().length>0&&(a.clientId=ga.getAll()[0].get("clientId").split(".")[0],a.trackingId=ga.getAll()[0].get("trackingId"),a.currentUrl=ga.getAll()[0].get("location"),a.sid=ga.getAll()[0].get("clientId").split(".")[1]),this.addToLocalStorage("prevClientId",a.clientId),this.getFromLocalStorage("userId")?a.userId=this.getFromLocalStorage("userId"):a.userId="anonymous",this.getFromLocalStorage("userType")&&(a.userType=this.getFromLocalStorage("userType")),a.deviceType=$("#deviceType").val(),$.browser&&(a.browserName=$.browser.name,a.browserVersion=$.browser.version);var b=new Date;a.timestamp=b.getTime();var c=this.extractSourceMediumInfo();return c&&(a.hitType=c),$.extend(a,this.getNBCookies())},extractSourceMediumInfo:function(){var a="landing";if(""!=this.getUrlParameterByName("gclid")||""!=this.getUrlParameterByName("gclsrc"))return this.createCookie("nbSource","google",30),this.createCookie("nbMedium","cpc",30),this.createCookie("nbCampaign","adwords",30),a;if(""!=this.getUrlParameterByName("utm_source"))return this.createCookie("nbSource",this.getUrlParameterByName("utm_source"),365),this.createCookie("nbMedium",this.getUrlParameterByName("utm_medium"),365),this.createCookie("nbCampaign",this.getUrlParameterByName("utm_campaign"),365),a;if(""!=document.referrer){if(this.readCookie("nbSource")||-1!=document.referrer.indexOf("nobroker.in")||-1!=document.referrer.indexOf("localhost"))a="";else{var b=document.referrer.match(/:\/\/(.[^/]+)/)[1];this.createCookie("nbSource",b,365),this.createCookie("nbMedium","organic",365),this.createCookie("nbCampaign",document.referrer,365)}return a}return!this.readCookie("nbSource")||-1!=this.readCookie("nbSource").indexOf("nobroker.in")&&-1!=this.readCookie("nbSource").indexOf("localhost")?(this.createCookie("nbSource","direct",365),this.createCookie("nbMedium","direct",365),this.createCookie("nbCampaign","direct",365),a):a},createCookie:function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"},getNBCookies:function(){for(var a=document.cookie.split(";"),b={},c=0;c<a.length;c++){var d=a[c].split("=");b[d[0].trim()]=unescape(d[1])}return b},readCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},addToLocalStorage:function(a,b){try{window.localStorage.setItem(a,b)}catch(a){}},getFromLocalStorage:function(a){try{return window.localStorage.getItem(a)}catch(a){}},removeFromLocalStorage:function(a){try{window.localStorage.removeItem(a)}catch(a){}},logPageViewEvent:function(a,b,c){var d,e;d=a||location.pathname,e=b?$.extend(b,this.extractGenericParamsForEvent()):this.extractGenericParamsForEvent(),"undefined"!=typeof ga&&void 0!==ga.getAll&&(c&&(ga("set",{dimension1:c.property}),ga("set",{dimension2:c.page}),c.value&&ga("set",{dimension3:c.value})),ga("send","event","PageOpen",d,JSON.stringify(e),void 0,{nonInteraction:1}))},logEvent:function(a,b,c){if("undefined"!=typeof ga&&void 0!==ga.getAll){var d=$.extend(c,this.extractGenericParamsForEvent());ga("send","event",a,b,JSON.stringify(d),void 0,{nonInteraction:1})}},logPageViewAndEvent:function(a,b,c,d){"undefined"!=typeof ga&&void 0!==ga.getAll&&(ga("send",{hitType:"pageview",page:a}),this.logEvent(b,c,d))}},adobeEvent={logAdobeEvent:function(a){var b=$("#loggedInUserId").val();b||(b=$("#mbTrackID").val());var c="https://pixel.everesttech.net/5425/t?"+a+"=1&ev_transid="+b;$("#adobe-event").attr("src",c)}},NBHistory={localityObj:function(a,b,c,d){var e={};return e.locId=a,e.name=b,e.lat=c,e.lng=d,e},addToSearchHistory:function(a,b,c,d,e,f){if(window.localStorage&&("RENT"===a||"BUY"===a||"PG"===a||"SHARED"===a)){var g={};if(window.localStorage[a]&&(g=JSON.parse(window.localStorage[a])),b){var h=$.trim(b).toUpperCase(),i=new Array;g[h]&&(i=JSON.parse(g[h]));for(var j=0;j<i.length;j++)i[j].name===c&&i.splice(j,1);5==i.length&&(i=i.slice(1)),i.push(this.localityObj(d,c,e,f)),g[h]=JSON.stringify(i);try{window.localStorage[a]=JSON.stringify(g)}catch(a){}}}}};